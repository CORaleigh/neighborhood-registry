{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js","../node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/EdgeSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js"],"names":["O","f","p","constructor","e","super","this","availability","sources","multipoint","point","polygon","polyline","loadedWkids","Set","loadedWkts","pendingAdds","updatingHandles","updating","layerSource","layer","destroy","length","t","task","abort","mapSources","destroySource","initialize","handles","add","on","onGraphicUpdate","addOnCollectionChange","graphics","onGraphicsChanged","addMany","toArray","r","s","a","queryEngine","executeQueryForSnapping","coordinateHelper","toPoint","d","toJSON","distance","types","query","filter","createQuery","where","then","candidates","flat","map","k","S","refresh","property","remove","graphic","removed","added","Map","o","geometry","needsInitializeProjection","spatialReference","push","set","uid","createPendingAdd","n","async","u","source","dest","signal","markLoadedSpatialReferences","addPromise","promise","i","wkid","wkt","visible","type","c","fromExtent","ensureSource","createOptimizedFeature","featureStore","has","h","m","j","y","g","b","createSource","l","w","geometryType","hasZ","hasM","v","fields","name","alias","objectIdField","scheduler","view","resourceController","removeFromSource","delete","size","removeById","constructOnly","prototype","readOnly","isWebMercator","I","maxX","minX","plus180Line","minus180Line","J","N","points","x","M","xmin","ymin","xmax","ymax","cut","valid","frameId","extent","frameIds","rings","Array","isArray","Math","ceil","abs","closed","minPts","paths","compareMinX","compareMinY","toBBox","_maxEntries","max","_minEntries","_initFormat","clear","prune","X","Y","B","all","_all","data","search","children","leaf","pop","collides","load","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","fromJSON","pushArray","log","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minY","maxY","deallocator","arguments","_indexInvalid","_boundsToLoad","_boundsById","_idByBounds","_index","_loadIndex","forEach","get","forEachInBounds","invalidateIndex","getObjectId","objectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","numFeatures","coords","featureCount","vertexCount","_add","_emitChanged","_remove","removeManyById","forEachBounds","getFeature","startMarkingUsedFeatures","sweep","emit","getLogger","error","feature","displayId","onFeatureAdd","onFeatureRemove","constraint","edgeStart","edgeEnd","start","end","targetPoint","fromPoint","target"],"mappings":"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","file":"static/js/63.b38f19d8.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{removeUnordered as i}from\"../../../../core/arrayUtils.js\";import{eachAlwaysValues as a,createTask as n}from\"../../../../core/promiseUtils.js\";import p from\"../../../../core/Accessor.js\";import d from\"../../../../geometry/Point.js\";import c from\"../../../../geometry/Polygon.js\";import{featureGeometryTypeKebabDictionary as l}from\"../../../../geometry/support/typeUtils.js\";import{initializeProjection as u,canProjectWithoutEngine as h,project as m}from\"../../../../geometry/projection.js\";import y from\"../../../../layers/graphics/OptimizedFeature.js\";import{convertFromGeometry as g}from\"../../../../layers/graphics/featureConversionUtils.js\";import{HandleOwnerMixin as f}from\"../../../../core/HandleOwner.js\";import{sortCandidatesInPlace as S}from\"../snappingUtils.js\";import{normalizeCentralMeridianSync as j}from\"../../../../geometry/support/normalizeUtilsSync.js\";import w from\"../../../../layers/graphics/data/FeatureStore.js\";import v from\"../../../../layers/graphics/data/QueryEngine.js\";import{convertSnappingCandidate as k}from\"./queryEngineUtils.js\";let O=class extends(f(p)){constructor(e){super(e),this.availability=1,this.sources={multipoint:null,point:null,polygon:null,polyline:null},this.loadedWkids=new Set,this.loadedWkts=new Set,this.pendingAdds=[]}get updating(){return this.updatingHandles.updating}get layer(){return this.layerSource.layer}destroy(){const e=this.pendingAdds;this.pendingAdds.length=0;for(const t of e)t.task.abort();this.mapSources((e=>this.destroySource(e)))}initialize(){this.handles.add([this.layer.on(\"graphic-update\",(e=>this.onGraphicUpdate(e))),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(e=>this.onGraphicsChanged(e)))]),this.addMany(this.layer.graphics.toArray())}async fetchCandidates(e,r){const s=(await a(this.mapSources((s=>s.queryEngine.executeQueryForSnapping({point:e.coordinateHelper.toPoint(e.point,new d).toJSON(),distance:e.distance,types:e.types,query:t(e.filter)?e.filter.createQuery().toJSON():{where:\"1=1\"}},r).then((({candidates:e})=>e)))))).flat().map((t=>k(t,e.coordinateHelper)));return S(e.point,s),{candidates:s}}refresh(){}onGraphicUpdate(e){switch(e.property){case\"geometry\":case\"visible\":this.remove(e.graphic),this.addMany([e.graphic])}}onGraphicsChanged(e){for(const t of e.removed)this.remove(t);this.addMany(e.added)}addMany(e){const t=[],s=new Map;for(const o of e)r(o.geometry)||(this.needsInitializeProjection(o.geometry.spatialReference)?(t.push(o.geometry.spatialReference),s.set(o.uid,o)):this.add(o));this.createPendingAdd(t,s)}createPendingAdd(e,t){if(!e.length)return;const r=n((async r=>{await u(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:r}),this.markLoadedSpatialReferences(e);for(const[,e]of t)this.add(e)}));this.updatingHandles.addPromise(r.promise);const s={task:r,graphics:t},o=()=>i(this.pendingAdds,s);r.promise.then(o,o),this.pendingAdds.push(s)}markLoadedSpatialReferences(e){for(const t of e)null!=t.wkid&&this.loadedWkids.add(t.wkid),null!=t.wkt&&this.loadedWkts.add(t.wkt)}add(e){if(r(e.geometry)||!e.visible)return;let s=e.geometry;if(\"mesh\"===s.type)return;\"extent\"===s.type&&(s=c.fromExtent(s));const o=this.ensureSource(s.type);if(r(o))return;const i=this.createOptimizedFeature(e.uid,s);t(i)&&o.featureStore.add(i)}needsInitializeProjection(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&((null==e.wkt||!this.loadedWkts.has(e.wkt))&&!h(e,this.spatialReference))}createOptimizedFeature(e,t){const r=m(j(t),this.spatialReference);return r?new y(g(r,!1,!1),{[b]:e},null,e):null}ensureSource(e){const r=this.sources[e];if(t(r))return r;const s=this.createSource(e);return this.sources[e]=s,s}createSource(e){const r=l.toJSON(e),s=new w({geometryType:r,hasZ:!1,hasM:!1});return{featureStore:s,queryEngine:new v({featureStore:s,fields:[{name:b,type:\"esriFieldTypeOID\",alias:b}],geometryType:r,hasM:!1,hasZ:!1,objectIdField:b,spatialReference:this.spatialReference,scheduler:t(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}remove(e){this.mapSources((t=>this.removeFromSource(t,e)));for(const t of this.pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}removeFromSource(e,t){const r=t.uid;e.featureStore.has(r)&&e.featureStore.removeById(t.uid)}destroySource(e){e.queryEngine.destroy(),this.sources[e.type]=null}mapSources(e){const{point:r,polygon:s,polyline:o,multipoint:i}=this.sources,a=[];return t(r)&&a.push(e(r)),t(s)&&a.push(e(s)),t(o)&&a.push(e(o)),t(i)&&a.push(e(i)),a}};e([s({constructOnly:!0})],O.prototype,\"spatialReference\",void 0),e([s({constructOnly:!0})],O.prototype,\"layerSource\",void 0),e([s({constructOnly:!0})],O.prototype,\"view\",void 0),e([s({readOnly:!0})],O.prototype,\"updating\",null),e([s({readOnly:!0})],O.prototype,\"availability\",void 0),O=e([o(\"esri.views.interactive.snapping.featureSources.GraphicsSnappingSource\")],O);const b=\"OBJECTID\";export{O as GraphicsSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getInfo as n}from\"./spatialReferenceUtils.js\";import{extentIntersectsPolyline as t}from\"./intersects.js\";import{getBoundsXY as i}from\"./boundsUtils.js\";import{isPoint as m,isMultipoint as s,isExtent as e,isPolygon as x,isPolyline as o}from\"./jsonUtils.js\";import{create as r}from\"./aaBoundingRect.js\";import{cutParams as a,getGeometryParts as f,offsetMagnitude as c}from\"./normalizeUtilsCommon.js\";function l(r){if(!r)return null;if(\"mesh\"===r.type)return r.toJSON();let f=null;const l=r.spatialReference,h=n(l);if(!h)return r.toJSON();const d=l.isWebMercator?102100:4326,I=a[d].maxX,g=a[d].minX,b=a[d].plus180Line,v=a[d].minus180Line;let J;const N=r.toJSON();if(m(N))J=y(N,I,g);else if(s(N))N.points=N.points.map((n=>y(n,I,g))),J=N;else if(e(N))J=p(N,h);else if(x(N)||o(N)){const n=M;i(n,N);const m={xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3]},s=c(m.xmin,g)*(2*I),e=0===s?N:u(N,s);m.xmin+=s,m.xmax+=s,t(m,b)&&m.xmax!==I||t(m,v)&&m.xmin!==g?f=e:J=e}else J=r.toJSON();if(null!==f){return(new j).cut(f,I)}return J}function u(n,t){const i=f(n);for(const m of i)for(const n of m)n[0]+=t;return n}function p(n,t){if(!t)return n;const i=h(n,t).map((n=>n.extent));return i.length<2?i[0]||n:i.length>2?(n.xmin=t.valid[0],n.xmax=t.valid[1],n):{rings:i.map((n=>[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]))}}function y(n,t,i){if(Array.isArray(n)){const m=n[0];if(m>t){const i=c(m,t);n[0]=m+i*(-2*t)}else if(m<i){const t=c(m,i);n[0]=m+t*(-2*i)}}else{const m=n.x;if(m>t){const i=c(m,t);n.x+=i*(-2*t)}else if(m<i){const t=c(m,i);n.x+=t*(-2*i)}}return n}function h(n,t){const i=[],{ymin:m,ymax:s}=n,e=n.xmax-n.xmin,x=n.xmin,o=n.xmax;let r;const[a,f]=t.valid;r=d(n.xmin,t);const c=r.x,l=r.frameId;r=d(n.xmax,t);const u=r.x,p=r.frameId,y=c===u&&e>0;if(e>2*f){const n={xmin:x<o?c:u,ymin:m,xmax:f,ymax:s},t={xmin:a,ymin:m,xmax:x<o?u:c,ymax:s},e={xmin:0,ymin:m,xmax:f,ymax:s},r={xmin:a,ymin:m,xmax:0,ymax:s},y=[],h=[];I(n,e)&&y.push(l),I(n,r)&&h.push(l),I(t,e)&&y.push(p),I(t,r)&&h.push(p);for(let i=l+1;i<p;i++)y.push(i),h.push(i);i.push({extent:n,frameIds:[l]},{extent:t,frameIds:[p]},{extent:e,frameIds:y},{extent:r,frameIds:h})}else c>u||y?i.push({extent:{xmin:c,ymin:m,xmax:f,ymax:s},frameIds:[l]},{extent:{xmin:a,ymin:m,xmax:u,ymax:s},frameIds:[p]}):i.push({extent:{xmin:c,ymin:m,xmax:u,ymax:s},frameIds:[l]});return i}function d(n,t){const[i,m]=t.valid,s=2*m;let e,x=0;return n>m?(e=Math.ceil(Math.abs(n-m)/s),n-=e*s,x=e):n<i&&(e=Math.ceil(Math.abs(n-i)/s),n+=e*s,x=-e),{x:n,frameId:x}}function I(n,t){const{xmin:i,ymin:m,xmax:s,ymax:e}=t;return g(n,i,m)&&g(n,i,e)&&g(n,s,e)&&g(n,s,m)}function g(n,t,i){return t>=n.xmin&&t<=n.xmax&&i>=n.ymin&&i<=n.ymax}class j{cut(n,t){let i;if(n.rings)this.closed=!0,i=n.rings,this.minPts=4;else{if(!n.paths)return null;this.closed=!1,i=n.paths,this.minPts=2}const m=i.length,s=-2*t;for(let e=0;e<m;e++){const n=i[e];if(n&&n.length>=this.minPts){const t=[];for(const i of n)t.push([i[0]+s,i[1]]);i.push(t)}}return this.closed?n.rings=i:n.paths=i,n}}const M=r();export{l as normalizeCentralMeridianSync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as t}from\"../../maybe.js\";import{indexOf as i,PositionHint as n}from\"../../arrayUtils.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(n){if(!n)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(n);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=t(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=i(s.children,n,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(t){for(let n=t.length-1;n>=0;n--){const e=t.data[n];if(0===e.children.length)if(n>0){const s=t.data[n-1],h=s.children;h.splice(i(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(i,n,e,h,a){const r=[n,e];for(;r.length;){const n=t(r.pop()),e=t(r.pop());if(n-e<=h)continue;const o=e+Math.ceil((n-e)/h/2)*h;s(i,o,e,n,a),r.push(e,o,o,n)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new n}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export default h;export{_ as BBox,h as PooledRBush};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{LineSnappingHint as t}from\"../hints/LineSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{LineConstraint as r}from\"../SnappingConstraint.js\";class e extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.edgeStart,t.edgeEnd)})}get hints(){return[new t(1,this.constraint.start,this.constraint.end)]}}export{e as EdgeSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{PointSnappingHint as t}from\"../hints/PointSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointConstraint as r}from\"../SnappingConstraint.js\";class i extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.targetPoint)})}get hints(){return[new t(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function r(r,n){switch(r.type){case\"edge\":return new e({coordinateHelper:n,edgeStart:n.fromPoint(r.start),edgeEnd:n.fromPoint(r.end),targetPoint:n.fromPoint(r.target),objectId:r.objectId});case\"vertex\":return new t({coordinateHelper:n,targetPoint:n.fromPoint(r.target),objectId:r.objectId})}}export{r as convertSnappingCandidate};\n"],"sourceRoot":""}