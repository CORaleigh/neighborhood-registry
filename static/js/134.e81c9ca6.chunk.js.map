{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","../node_modules/@arcgis/core/views/draw/support/GraphicMover.js"],"names":["j","s","getLogger","C","a","constructor","e","super","this","layer","interactive","selectable","grabbable","dragging","cursor","events","n","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","t","geometry","symbol","_set","attachSymbolChanged","error","graphic","elevationInfo","v","o","offset","b","mode","_get","_updateGraphicSymbol","grabbableForEvent","emit","action","destroy","detachSymbolChanged","_resetGraphicSymbol","intersectionDistance","visible","r","l","i","view","type","_intersectDistance2D","_intersectDistance3D","attach","add","detach","remove","watch","focusedSymbol","_focused","f","S","originalPoint","equals","spatialReference","y","g","clone","mapPoint","radiusPx","c","size","h","G","toScreen","x","xoffset","p","yoffset","_","toMap","include","d","w","renderSpatialReference","u","state","camera","eye","constructOnly","nonNullable","prototype","readOnly","value","m","index","viewEvent","allGraphics","dx","dy","totalDx","totalDy","defaultPrevented","preventDefault","k","EventedAccessor","_activeGraphic","_dragEvent","_handles","_hoverGraphic","_initialDragGeometry","_viewHandles","_manipulators","callbacks","onGraphicClick","onGraphicDoubleClick","onGraphicMoveStart","onGraphicMove","onGraphicMoveStop","onGraphicPointerOver","onGraphicPointerOut","onGraphicPointerDown","onGraphicPointerUp","enableMoveAllGraphics","graphics","initialize","_setUpManipulators","on","_clickHandler","TOOL","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","_keyDownHandler","reset","forEach","removeAll","get","updateGeometry","set","_findTargetGraphic","indexOf","stopPropagation","origin","key","Number","MAX_VALUE","length","map"],"mappings":"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","file":"static/js/134.e81c9ca6.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isNone as o,isSome as i}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as y,project as g,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),o=e?e.offset:0;return new b({mode:t,offset:o})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const s=t.geometry;if(o(s))return null;const r=this._get(\"focusedSymbol\"),l=i(r)?r:t.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,s,l):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;const l=1;let a=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?l:null;if(o(a)||!a.originalPoint.equals(s)){const t=s,o=e.spatialReference;if(y(t.spatialReference,o)){const e=g(t,o);a={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=a}}if(i(a)){const o=h(t,G),i=e.toScreen(a.mapPoint),s=a.radiusPx,n=i.x+c(r.xoffset),p=i.y-c(r.yoffset);return _(o,[n,p])<s*s?l:null}return null}_intersectDistance3D(e,t,o){const i=e.toMap(t,{include:[o]});return i&&d(i,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as m,GraphicPointerOutEvent as G,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new m(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new G(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new G(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n"],"sourceRoot":""}