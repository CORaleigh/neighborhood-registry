{"version":3,"sources":["../node_modules/@arcgis/core/tasks/support/ClosestFacilitySolveResult.js","../node_modules/@arcgis/core/rest/closestFacility.js","../node_modules/@arcgis/core/tasks/ClosestFacilityTask.js","../node_modules/@arcgis/core/tasks/support/GPMessage.js","../node_modules/@arcgis/core/tasks/support/NAMessage.js","../node_modules/@arcgis/core/tasks/support/DirectionsFeatureSet.js","../node_modules/@arcgis/core/core/queryUtils.js","../node_modules/@arcgis/core/tasks/mixins/NAServiceDescription.js","../node_modules/@arcgis/core/tasks/support/RouteResult.js","../node_modules/@arcgis/core/tasks/support/RouteResultsContainer.js","../node_modules/@arcgis/core/rest/networkUtils.js"],"names":["f","r","m","fromJSON","features","map","geometry","j","i","constructor","super","this","directions","facilities","incidents","messages","pointBarriers","polylineBarriers","polygonBarriers","routes","readFacilities","readIncidents","readPointBarriers","e","barriers","readPolylineBarriers","readPolygonBarriers","readRoutes","o","t","p","spatialReference","s","u","d","type","y","prototype","a","c","l","n","g","accumulateAttributes","name","attributeParameterValues","directionsTimeAttribute","impedanceAttribute","outSpatialReference","getter","wkid","restrictionAttributes","returnPointBarriers","returnRoutes","travelMode","url","solve","async","B","then","push","slice","path","Promise","resolve","dontCheck","hasZ","forEach","get","query","toQueryParams","data","esriJobMessageTypeInformative","esriJobMessageTypeProcessDefinition","esriJobMessageTypeProcessStart","esriJobMessageTypeProcessStop","esriJobMessageTypeWarning","esriJobMessageTypeError","esriJobMessageTypeEmpty","esriJobMessageTypeAbort","description","String","json","write","read","0","1","2","3","50","100","101","200","extent","geometryType","routeId","routeName","totalDriveTime","totalLength","totalTime","readFeatures","_decompressFeatureGeometry","summary","envelope","strings","events","x","point","z","attributes","ETA","arriveTimeUTC","_mergePolylinesToSinglePath","_decompressGeometry","compressedGeometry","h","match","parseInt","indexOf","length","paths","hasM","concat","source","readOnly","value","_options","toJSON","Object","keys","Array","isArray","join","JSON","stringify","_serviceDescriptionPromise","_fetchServiceDescription","parsedUrl","token","supportedTravelModes","id","itemId","currentVersion","defaultTravelMode","error","substring","owningSystemUrl","test","serviceName","results","paramName","parse","TravelMode","_isInputGeometryZAware","_dropZValuesOffInputGeometry","console","log","route","stops","routeResults","aliasOf","v","Name","RouteName","splice","T"],"mappings":"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","file":"static/js/57.17812d12.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as e}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as t}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as i}from\"../../core/JSONSupport.js\";import p from\"../../geometry/SpatialReference.js\";import a from\"../../geometry/Point.js\";import n from\"../../geometry/Polygon.js\";import l from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import u from\"../../Graphic.js\";import m from\"./FeatureSet.js\";import c from\"./NAMessage.js\";import y from\"./DirectionsFeatureSet.js\";function d(r){return r.features.map((o=>{const t=p.fromJSON(r.spatialReference),s=u.fromJSON(o);return e(s.geometry)&&(s.geometry.spatialReference=t),s}))}function f(r){return m.fromJSON(r).features.map((r=>r.geometry))}let j=class extends i{constructor(r){super(r),this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null}readFacilities(r){return f(r)}readIncidents(r){return f(r)}readPointBarriers(r,e){return f(e.barriers)}readPolylineBarriers(r){return f(r)}readPolygonBarriers(r){return f(r)}readRoutes(r){return d(r)}};r([o({type:[y]})],j.prototype,\"directions\",void 0),r([o({type:[a]})],j.prototype,\"facilities\",void 0),r([t(\"facilities\")],j.prototype,\"readFacilities\",null),r([o({type:[a]})],j.prototype,\"incidents\",void 0),r([t(\"incidents\")],j.prototype,\"readIncidents\",null),r([o({type:[c]})],j.prototype,\"messages\",void 0),r([o({type:[a]})],j.prototype,\"pointBarriers\",void 0),r([t(\"pointBarriers\",[\"barriers\"])],j.prototype,\"readPointBarriers\",null),r([o({type:[l]})],j.prototype,\"polylineBarriers\",void 0),r([t(\"polylineBarriers\")],j.prototype,\"readPolylineBarriers\",null),r([o({type:[n]})],j.prototype,\"polygonBarriers\",void 0),r([t(\"polygonBarriers\")],j.prototype,\"readPolygonBarriers\",null),r([o({type:[u]})],j.prototype,\"routes\",void 0),r([t(\"routes\")],j.prototype,\"readRoutes\",null),j=r([s(\"esri.tasks.support.ClosestFacilitySolveResult\")],j);var g=j;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{normalizeCentralMeridian as r}from\"../geometry/support/normalizeUtils.js\";import{parseUrl as t}from\"./utils.js\";import{createQueryParamsHelper as i}from\"../core/queryUtils.js\";import{collectGeometries as s,isInputGeometryZAware as a,fetchServiceDescription as o,dropZValuesOffInputGeometry as n}from\"./networkUtils.js\";import u from\"../tasks/support/ClosestFacilitySolveResult.js\";const l=i({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},facilities:!0,incidents:!0,outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},returnPointBarriers:{name:\"returnBarriers\"},returnRoutes:{name:\"returnCFRoutes\"},travelMode:!0});async function c(i,c,m){const f=[],p=[],y={},B={},d=t(i);return c.incidents&&c.incidents.features&&s(c.incidents.features,p,\"incidents.features\",y),c.facilities&&c.facilities.features&&s(c.facilities.features,p,\"facilities.features\",y),c.pointBarriers&&c.pointBarriers.features&&s(c.pointBarriers.features,p,\"pointBarriers.features\",y),c.polylineBarriers&&c.polylineBarriers.features&&s(c.polylineBarriers.features,p,\"polylineBarriers.features\",y),c.polygonBarriers&&c.polygonBarriers.features&&s(c.polygonBarriers.features,p,\"polygonBarriers.features\",y),r(p).then((e=>{for(const r in y){const t=y[r];f.push(r),B[r]=e.slice(t[0],t[1])}return a(B,f)?o(d.path):Promise.resolve({dontCheck:!0})})).then((r=>{(\"dontCheck\"in r?r.dontCheck:r.hasZ)||n(B,f);for(const e in B)B[e].forEach(((r,t)=>{c.get(e)[t].geometry=r}));let t={query:{...d.query,f:\"json\",...l.toQueryParams(c)}};return m&&(t={...m,...t}),e(`${d.path}/solveClosestFacility`,t)})).then((e=>u.fromJSON(e.data)))}export{c as solve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import t from\"./Task.js\";import{solve as e}from\"../rest/closestFacility.js\";import{NAServiceDescriptionMixin as i}from\"./mixins/NAServiceDescription.js\";let p=class extends(i(t)){constructor(r){super(r),this.url=null}solve(r,s){return e(this.url,r,s)}};r([s()],p.prototype,\"url\",void 0),p=r([o(\"esri.tasks.ClosestFacilityTask\")],p);var c=p;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";const p=new s({esriJobMessageTypeInformative:\"informative\",esriJobMessageTypeProcessDefinition:\"process-definition\",esriJobMessageTypeProcessStart:\"process-start\",esriJobMessageTypeProcessStop:\"process-stop\",esriJobMessageTypeWarning:\"warning\",esriJobMessageTypeError:\"error\",esriJobMessageTypeEmpty:\"empty\",esriJobMessageTypeAbort:\"abort\"});let i=class extends t{constructor(r){super(r),this.description=null,this.type=null}};r([e({type:String,json:{write:!0}})],i.prototype,\"description\",void 0),r([e({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([o(\"esri.tasks.support.GPMessage\")],i);var a=i;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import t from\"./GPMessage.js\";const p=new s({0:\"informative\",1:\"process-definition\",2:\"process-start\",3:\"process-stop\",50:\"warning\",100:\"error\",101:\"empty\",200:\"abort\"});let i=class extends t{constructor(r){super(r),this.type=null}};r([o({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([e(\"esri.tasks.support.NAMessage\")],i);var c=i;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{unwrap as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../geometry/SpatialReference.js\";import p from\"../../geometry/Point.js\";import n from\"../../geometry/Extent.js\";import i from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import m from\"../../Graphic.js\";import l from\"./FeatureSet.js\";let u=class extends l{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType=\"polyline\",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,r){(e||[]).forEach((e=>{this._decompressFeatureGeometry(e,r.summary.envelope.spatialReference)}));const o=a.fromJSON(r.spatialReference);return e.map((e=>{const r=m.fromJSON(e),s=e.geometry&&e.geometry.spatialReference;return r.geometry&&!s&&(t(r.geometry).spatialReference=o),r.strings=e.strings,r.events=(e.events||[]).map((t=>{const r=new m({geometry:new p({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),r}))}get mergedGeometry(){if(!this.features)return null;const e=this.features.map((({geometry:e})=>t(e))),r=this.get(\"extent.spatialReference\");return this._mergePolylinesToSinglePath(e,r)}get strings(){return this.features.map((({strings:e})=>e))}_decompressFeatureGeometry(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}_decompressGeometry(e,t){let r=0,o=0,s=0,a=0;const p=[];let n,i,m,l,u,c,y,g,h=0,f=0,d=0;if(u=e.match(/((\\+|\\-)[^\\+\\-\\|]+|\\|)/g),u||(u=[]),0===parseInt(u[h],32)){h=2;const e=parseInt(u[h],32);h++,c=parseInt(u[h],32),h++,1&e&&(f=u.indexOf(\"|\")+1,y=parseInt(u[f],32),f++),2&e&&(d=u.indexOf(\"|\",f)+1,g=parseInt(u[d],32),d++)}else c=parseInt(u[h],32),h++;for(;h<u.length&&\"|\"!==u[h];){n=parseInt(u[h],32)+r,h++,r=n,i=parseInt(u[h],32)+o,h++,o=i;const e=[n/c,i/c];f&&(l=parseInt(u[f],32)+s,f++,s=l,e.push(l/y)),d&&(m=parseInt(u[d],32)+a,d++,a=m,e.push(m/g)),p.push(e)}return{paths:[p],hasZ:f>0,hasM:d>0,spatialReference:t}}_mergePolylinesToSinglePath(e,t){let r=[];(e||[]).forEach((e=>{e.paths.forEach((e=>{r=r.concat(e)}))}));const o=[];let s=[0,0];return r.forEach((e=>{e[0]===s[0]&&e[1]===s[1]||(o.push(e),s=e)})),new i({paths:[o]},t)}};e([r({type:n,json:{read:{source:\"summary.envelope\"}}})],u.prototype,\"extent\",void 0),e([r()],u.prototype,\"features\",void 0),e([o(\"features\")],u.prototype,\"readFeatures\",null),e([r()],u.prototype,\"geometryType\",void 0),e([r({readOnly:!0})],u.prototype,\"mergedGeometry\",null),e([r()],u.prototype,\"routeId\",void 0),e([r()],u.prototype,\"routeName\",void 0),e([r({value:null,readOnly:!0})],u.prototype,\"strings\",null),e([r({json:{read:{source:\"summary.totalDriveTime\"}}})],u.prototype,\"totalDriveTime\",void 0),e([r({json:{read:{source:\"summary.totalLength\"}}})],u.prototype,\"totalLength\",void 0),e([r({json:{read:{source:\"summary.totalTime\"}}})],u.prototype,\"totalTime\",void 0),u=e([s(\"esri.tasks.support.DirectionsFeatureSet\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=t=>{if(!Array.isArray(t))return!1;const[e]=t;return\"number\"==typeof e||\"string\"==typeof e};class e{constructor(t={}){this._options=t}toQueryParams(e){if(!e)return null;const o=e.toJSON(),n={};return Object.keys(o).forEach((e=>{const r=this._options[e];if(r){const s=\"boolean\"!=typeof r&&r.name?r.name:e,i=\"boolean\"!=typeof r&&r.getter?r.getter(o):o[e];null!=i&&(n[s]=t(i)?i.join(\",\"):\"object\"==typeof i?JSON.stringify(i):i)}else n[e]=o[e]}),this),n}}function o(t){return new e(t)}export{o as createQueryParamsHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{getDeepValue as r}from\"../../core/object.js\";import{isSome as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import{urlToObject as i}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../request.js\";import n from\"../Task.js\";async function l(e,r){try{const{data:{supportedTravelModes:t,defaultTravelMode:s}}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\",token:r}});return{supportedTravelModes:t,defaultTravelMode:s}}catch(t){throw new o(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}async function c(e,t){const{data:s}=await a(e.substring(0,e.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\",token:t}});if(!s||!s.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=s.owningSystemUrl;const{data:o}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\",token:t}}),n=r(\"helperServices.routingUtilities.url\",o);if(!n)return{supportedTravelModes:[],defaultTravelMode:null};const l=i(e),c=/\\/solveClosestFacility$/.test(l.path)?\"Route\":/\\/solveClosestFacility$/.test(l.path)?\"ClosestFacility\":\"ServiceAreas\",u=await a(n+(\"/\"===n[n.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:c,token:t}}),p=[];let d=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const r of e)if(\"supportedTravelModes\"===r.paramName){if(r.value&&r.value.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);p.push(r)}}else\"defaultTravelMode\"===r.paramName&&(d=r.value)}return{supportedTravelModes:p,defaultTravelMode:d}}const u=r=>{let i=class extends r{async getServiceDescription(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(e)),this._serviceDescriptionPromise}async _fetchServiceDescription(e){if(!this.url||!this.parsedUrl)throw new o(\"network-service:missing-url\",\"Url to Network service is missing\");const r=this.url,{data:t}=await a(r,{query:{f:\"json\",token:e}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let o=0;o<t.supportedTravelModes.length;o++)t.supportedTravelModes[o].id||(t.supportedTravelModes[o].id=t.supportedTravelModes[o].itemId);const s=t.currentVersion>=10.4?l(r,e):c(r,e),{defaultTravelMode:i,supportedTravelModes:n}=await s;return t.defaultTravelMode=i,t.supportedTravelModes=n,t}_isInputGeometryZAware(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}};return i=e([s(\"esri.tasks.mixins.NAServiceDescription\")],i),i};let p=class extends(u(n)){};p=e([s(\"esri.tasks.mixins.NAServiceDescription\")],p);export{p as NAServiceDescription,u as NAServiceDescriptionMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import e from\"../../Graphic.js\";import p from\"./DirectionsFeatureSet.js\";let i=class extends s{constructor(o){super(o),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};o([r({type:p,json:{write:!0}})],i.prototype,\"directions\",void 0),o([r({type:e,json:{write:!0}})],i.prototype,\"route\",void 0),o([r({type:String,json:{write:!0}})],i.prototype,\"routeName\",void 0),o([r({type:[e],json:{write:!0}})],i.prototype,\"stops\",void 0),i=o([t(\"esri.tasks.support.RouteResult\")],i);var u=i;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as e}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import p from\"../../Graphic.js\";import i from\"./FeatureSet.js\";import a from\"./NAMessage.js\";import l from\"./RouteResult.js\";function n(r){return r&&i.fromJSON(r).features.map((r=>r))}let u=class extends t{constructor(r){super(r),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(r,o){return n(o.barriers||o.pointBarriers)}readPolylineBarriers(r){return n(r)}readPolygonBarriers(r){return n(r)}};r([o({aliasOf:\"pointBarriers\"})],u.prototype,\"barriers\",void 0),r([o({type:[a]})],u.prototype,\"messages\",void 0),r([o({type:[p]})],u.prototype,\"pointBarriers\",void 0),r([e(\"pointBarriers\",[\"barriers\",\"pointBarriers\"])],u.prototype,\"readPointBarriers\",null),r([o({type:[p]})],u.prototype,\"polylineBarriers\",void 0),r([e(\"polylineBarriers\")],u.prototype,\"readPolylineBarriers\",null),r([o({type:[p]})],u.prototype,\"polygonBarriers\",void 0),r([e(\"polygonBarriers\")],u.prototype,\"readPolygonBarriers\",null),r([o({type:[l]})],u.prototype,\"routeResults\",void 0),u=r([s(\"esri.tasks.support.RouteResultsContainer\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getDeepValue as e}from\"../core/object.js\";import{isSome as t}from\"../core/maybe.js\";import r from\"../core/Error.js\";import s from\"../request.js\";import{parseUrl as o}from\"./utils.js\";import a from\"../tasks/support/RouteResultsContainer.js\";function l(e,t,r,s){s[r]=[t.length,t.length+e.length],e.forEach((e=>{t.push(e.geometry)}))}function n(e,t){for(let r=0;r<t.length;r++){const s=e[t[r]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}function i(e){const t=[],r=[],{directions:s=[],routes:{features:o=[],spatialReference:l=null}={},stops:{features:n=[],spatialReference:i=null}={},barriers:u,polygonBarriers:d,polylineBarriers:p,messages:f}=e.data,c=\"esri.tasks.RouteTask.NULL_ROUTE_NAME\";let v,m,h=!0;const g=o&&l||n&&i||u&&u.spatialReference||d&&d.spatialReference||p&&p.spatialReference;s.forEach((e=>{t.push(v=e.routeName),r[v]={directions:e}})),o.forEach((e=>{-1===t.indexOf(v=e.attributes.Name)&&(t.push(v),r[v]={}),e.geometry&&(e.geometry.spatialReference=g),r[v].route=e})),n.forEach((e=>{m=e.attributes,-1===t.indexOf(v=m.RouteName||c)&&(t.push(v),r[v]={}),v!==c&&(h=!1),e.geometry&&(e.geometry.spatialReference=g),null==r[v].stops&&(r[v].stops=[]),r[v].stops.push(e)})),n.length>0&&!0===h&&(r[t[0]].stops=r[c].stops,delete r[c],t.splice(t.indexOf(c),1));const T=t.map((e=>(r[e].routeName=e===c?null:e,r[e])));return a.fromJSON({routeResults:T,pointBarriers:u,polygonBarriers:d,polylineBarriers:p,messages:f})}function u(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}async function d(e){if(!e)throw new r(\"network-service:missing-url\",\"Url to Network service is missing\");const{data:t}=await s(e,{query:{f:\"json\"}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let r=0;r<t.supportedTravelModes.length;r++)t.supportedTravelModes[r].id||(t.supportedTravelModes[r].id=t.supportedTravelModes[r].itemId);const o=t.currentVersion>=10.4?f(e):p(e),{defaultTravelMode:a,supportedTravelModes:l}=await o;return t.defaultTravelMode=a,t.supportedTravelModes=l,t}async function p(t){const{data:r}=await s(t.substring(0,t.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\"}});if(!r||!r.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};t=r.owningSystemUrl;const{data:a}=await s(t+(\"/\"===t[t.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\"}}),l=e(\"helperServices.routingUtilities.url\",a);if(!l)return{supportedTravelModes:[],defaultTravelMode:null};const n=o(t),i=/\\/solve$/.test(n.path)?\"Route\":/\\/solveClosestFacility$/.test(n.path)?\"ClosestFacility\":\"ServiceAreas\",u=await s(l+(\"/\"===l[l.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:i}}),d=[];let p=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const t of e)if(\"supportedTravelModes\"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);d.push(t)}}else\"defaultTravelMode\"===t.paramName&&(p=t.value)}return{supportedTravelModes:d,defaultTravelMode:p}}async function f(e){try{const{data:{supportedTravelModes:t,defaultTravelMode:r}}=await s(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\"}});return{supportedTravelModes:t,defaultTravelMode:r}}catch(t){throw new r(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}export{l as collectGeometries,n as dropZValuesOffInputGeometry,d as fetchServiceDescription,p as fetchTravelModesGP,i as handleSolveResponse,u as isInputGeometryZAware,f as retrieveTravelModes};\n"],"sourceRoot":""}