{"version":3,"sources":["../node_modules/@arcgis/core/tasks/support/ServiceAreaSolveResult.js","../node_modules/@arcgis/core/rest/serviceArea.js","../node_modules/@arcgis/core/tasks/ServiceAreaTask.js","../node_modules/@arcgis/core/tasks/support/GPMessage.js","../node_modules/@arcgis/core/tasks/support/NAMessage.js","../node_modules/@arcgis/core/tasks/support/DirectionsFeatureSet.js","../node_modules/@arcgis/core/core/queryUtils.js","../node_modules/@arcgis/core/tasks/mixins/NAServiceDescription.js","../node_modules/@arcgis/core/tasks/support/RouteResult.js","../node_modules/@arcgis/core/tasks/support/RouteResultsContainer.js","../node_modules/@arcgis/core/rest/networkUtils.js"],"names":["u","r","features","map","o","t","p","fromJSON","spatialReference","s","c","e","geometry","d","y","f","i","constructor","super","this","facilities","messages","pointBarriers","polylineBarriers","polygonBarriers","serviceAreaPolylines","serviceAreaPolygons","readFacilities","readPointBarriers","barriers","readPolylineBarriers","readPolygonBarriers","readIncidents","saPolylines","readServiceAreaPolygons","saPolygons","type","a","prototype","m","n","l","g","accumulateAttributes","name","attributeParameterValues","defaultBreaks","outSpatialReference","getter","wkid","restrictionAttributes","returnPointBarriers","travelMode","url","solve","async","B","h","then","push","slice","path","catch","dontCheck","Promise","resolve","hasZ","forEach","get","query","toQueryParams","data","esriJobMessageTypeInformative","esriJobMessageTypeProcessDefinition","esriJobMessageTypeProcessStart","esriJobMessageTypeProcessStop","esriJobMessageTypeWarning","esriJobMessageTypeError","esriJobMessageTypeEmpty","esriJobMessageTypeAbort","description","String","json","write","read","0","1","2","3","50","100","101","200","extent","geometryType","routeId","routeName","totalDriveTime","totalLength","totalTime","readFeatures","_decompressFeatureGeometry","summary","envelope","strings","events","x","point","z","attributes","ETA","arriveTimeUTC","_mergePolylinesToSinglePath","_decompressGeometry","compressedGeometry","match","parseInt","indexOf","length","paths","hasM","concat","source","readOnly","value","_options","toJSON","Object","keys","Array","isArray","join","JSON","stringify","_serviceDescriptionPromise","_fetchServiceDescription","parsedUrl","token","supportedTravelModes","id","itemId","currentVersion","defaultTravelMode","error","substring","owningSystemUrl","test","serviceName","results","paramName","parse","TravelMode","_isInputGeometryZAware","_dropZValuesOffInputGeometry","console","log","directions","route","stops","routeResults","aliasOf","routes","v","Name","RouteName","splice","T"],"mappings":"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","file":"static/js/59.de29d3c6.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{unwrap as e}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as t}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as i}from\"../../core/JSONSupport.js\";import p from\"../../geometry/SpatialReference.js\";import a from\"../../geometry/Point.js\";import l from\"../../geometry/Polygon.js\";import n from\"../../geometry/Polyline.js\";import{fromJSON as y}from\"../../geometry/support/jsonUtils.js\";import\"../../geometry.js\";import c from\"../../Graphic.js\";import m from\"./NAMessage.js\";function u(r){return r.features.map((o=>{const t=p.fromJSON(r.spatialReference),s=c.fromJSON(o);return e(s.geometry).spatialReference=t,s}))}function d(r){return r.features.map((e=>(e.geometry.spatialReference=r.spatialReference,y(e.geometry))))}let f=class extends i{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return d(r)}readPointBarriers(r,e){return d(e.barriers)}readPolylineBarriers(r){return d(r)}readPolygonBarriers(r){return d(r)}readIncidents(r,e){return u(e.saPolylines)}readServiceAreaPolygons(r,e){return u(e.saPolygons)}};r([o({type:[a]})],f.prototype,\"facilities\",void 0),r([t(\"facilities\")],f.prototype,\"readFacilities\",null),r([o({type:[m]})],f.prototype,\"messages\",void 0),r([o({type:[a]})],f.prototype,\"pointBarriers\",void 0),r([t(\"pointBarriers\",[\"barriers\"])],f.prototype,\"readPointBarriers\",null),r([o({type:[n]})],f.prototype,\"polylineBarriers\",void 0),r([t(\"polylineBarriers\")],f.prototype,\"readPolylineBarriers\",null),r([o({type:[l]})],f.prototype,\"polygonBarriers\",void 0),r([t(\"polygonBarriers\")],f.prototype,\"readPolygonBarriers\",null),r([o({type:[c]})],f.prototype,\"serviceAreaPolylines\",void 0),r([t(\"serviceAreaPolylines\",[\"saPolylines\"])],f.prototype,\"readIncidents\",null),r([o({type:[c]})],f.prototype,\"serviceAreaPolygons\",void 0),r([t(\"serviceAreaPolygons\",[\"saPolygons\"])],f.prototype,\"readServiceAreaPolygons\",null),f=r([s(\"esri.tasks.support.ServiceAreaSolveResult\")],f);var g=f;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport r from\"../request.js\";import{normalizeCentralMeridian as e}from\"../geometry/support/normalizeUtils.js\";import{parseUrl as t}from\"./utils.js\";import{createQueryParamsHelper as i}from\"../core/queryUtils.js\";import{collectGeometries as s,isInputGeometryZAware as a,fetchServiceDescription as o,dropZValuesOffInputGeometry as n}from\"./networkUtils.js\";import u from\"../tasks/support/ServiceAreaSolveResult.js\";const l=i({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:\"outSR\",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},returnPointBarriers:{name:\"returnBarriers\"},travelMode:!0});async function f(i,f,c){const p=[],m=[],B={},y={},h=t(i);return f.facilities&&f.facilities.features&&s(f.facilities.features,m,\"facilities.features\",B),f.pointBarriers&&f.pointBarriers.features&&s(f.pointBarriers.features,m,\"pointBarriers.features\",B),f.polylineBarriers&&f.polylineBarriers.features&&s(f.polylineBarriers.features,m,\"polylineBarriers.features\",B),f.polygonBarriers&&f.polygonBarriers.features&&s(f.polygonBarriers.features,m,\"polygonBarriers.features\",B),e(m).then((r=>{for(const e in B){const t=B[e];p.push(e),y[e]=r.slice(t[0],t[1])}return a(y,p)?o(h.path).catch((()=>({dontCheck:!0}))):Promise.resolve({dontCheck:!0})})).then((e=>{(\"dontCheck\"in e?e.dontCheck:e.hasZ)||n(y,p);for(const r in y)y[r].forEach(((e,t)=>{f.get(r)[t].geometry=e}));let t={query:{...h.query,f:\"json\",...l.toQueryParams(f)}};return c&&(t={...c,...t}),r(`${h.path}/solveServiceArea`,t)})).then((r=>u.fromJSON(r.data)))}export{f as solve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import e from\"./Task.js\";import{solve as t}from\"../rest/serviceArea.js\";import{NAServiceDescriptionMixin as p}from\"./mixins/NAServiceDescription.js\";let i=class extends(p(e)){constructor(r){super(r),this.url=null}solve(r,s){return t(this.url,r,s)}};r([s()],i.prototype,\"url\",void 0),i=r([o(\"esri.tasks.ServiceAreaTask\")],i);var c=i;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";const p=new s({esriJobMessageTypeInformative:\"informative\",esriJobMessageTypeProcessDefinition:\"process-definition\",esriJobMessageTypeProcessStart:\"process-start\",esriJobMessageTypeProcessStop:\"process-stop\",esriJobMessageTypeWarning:\"warning\",esriJobMessageTypeError:\"error\",esriJobMessageTypeEmpty:\"empty\",esriJobMessageTypeAbort:\"abort\"});let i=class extends t{constructor(r){super(r),this.description=null,this.type=null}};r([e({type:String,json:{write:!0}})],i.prototype,\"description\",void 0),r([e({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([o(\"esri.tasks.support.GPMessage\")],i);var a=i;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import t from\"./GPMessage.js\";const p=new s({0:\"informative\",1:\"process-definition\",2:\"process-start\",3:\"process-stop\",50:\"warning\",100:\"error\",101:\"empty\",200:\"abort\"});let i=class extends t{constructor(r){super(r),this.type=null}};r([o({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([e(\"esri.tasks.support.NAMessage\")],i);var c=i;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{unwrap as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../geometry/SpatialReference.js\";import p from\"../../geometry/Point.js\";import n from\"../../geometry/Extent.js\";import i from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import m from\"../../Graphic.js\";import l from\"./FeatureSet.js\";let u=class extends l{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType=\"polyline\",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,r){(e||[]).forEach((e=>{this._decompressFeatureGeometry(e,r.summary.envelope.spatialReference)}));const o=a.fromJSON(r.spatialReference);return e.map((e=>{const r=m.fromJSON(e),s=e.geometry&&e.geometry.spatialReference;return r.geometry&&!s&&(t(r.geometry).spatialReference=o),r.strings=e.strings,r.events=(e.events||[]).map((t=>{const r=new m({geometry:new p({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),r}))}get mergedGeometry(){if(!this.features)return null;const e=this.features.map((({geometry:e})=>t(e))),r=this.get(\"extent.spatialReference\");return this._mergePolylinesToSinglePath(e,r)}get strings(){return this.features.map((({strings:e})=>e))}_decompressFeatureGeometry(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}_decompressGeometry(e,t){let r=0,o=0,s=0,a=0;const p=[];let n,i,m,l,u,c,y,g,h=0,f=0,d=0;if(u=e.match(/((\\+|\\-)[^\\+\\-\\|]+|\\|)/g),u||(u=[]),0===parseInt(u[h],32)){h=2;const e=parseInt(u[h],32);h++,c=parseInt(u[h],32),h++,1&e&&(f=u.indexOf(\"|\")+1,y=parseInt(u[f],32),f++),2&e&&(d=u.indexOf(\"|\",f)+1,g=parseInt(u[d],32),d++)}else c=parseInt(u[h],32),h++;for(;h<u.length&&\"|\"!==u[h];){n=parseInt(u[h],32)+r,h++,r=n,i=parseInt(u[h],32)+o,h++,o=i;const e=[n/c,i/c];f&&(l=parseInt(u[f],32)+s,f++,s=l,e.push(l/y)),d&&(m=parseInt(u[d],32)+a,d++,a=m,e.push(m/g)),p.push(e)}return{paths:[p],hasZ:f>0,hasM:d>0,spatialReference:t}}_mergePolylinesToSinglePath(e,t){let r=[];(e||[]).forEach((e=>{e.paths.forEach((e=>{r=r.concat(e)}))}));const o=[];let s=[0,0];return r.forEach((e=>{e[0]===s[0]&&e[1]===s[1]||(o.push(e),s=e)})),new i({paths:[o]},t)}};e([r({type:n,json:{read:{source:\"summary.envelope\"}}})],u.prototype,\"extent\",void 0),e([r()],u.prototype,\"features\",void 0),e([o(\"features\")],u.prototype,\"readFeatures\",null),e([r()],u.prototype,\"geometryType\",void 0),e([r({readOnly:!0})],u.prototype,\"mergedGeometry\",null),e([r()],u.prototype,\"routeId\",void 0),e([r()],u.prototype,\"routeName\",void 0),e([r({value:null,readOnly:!0})],u.prototype,\"strings\",null),e([r({json:{read:{source:\"summary.totalDriveTime\"}}})],u.prototype,\"totalDriveTime\",void 0),e([r({json:{read:{source:\"summary.totalLength\"}}})],u.prototype,\"totalLength\",void 0),e([r({json:{read:{source:\"summary.totalTime\"}}})],u.prototype,\"totalTime\",void 0),u=e([s(\"esri.tasks.support.DirectionsFeatureSet\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=t=>{if(!Array.isArray(t))return!1;const[e]=t;return\"number\"==typeof e||\"string\"==typeof e};class e{constructor(t={}){this._options=t}toQueryParams(e){if(!e)return null;const o=e.toJSON(),n={};return Object.keys(o).forEach((e=>{const r=this._options[e];if(r){const s=\"boolean\"!=typeof r&&r.name?r.name:e,i=\"boolean\"!=typeof r&&r.getter?r.getter(o):o[e];null!=i&&(n[s]=t(i)?i.join(\",\"):\"object\"==typeof i?JSON.stringify(i):i)}else n[e]=o[e]}),this),n}}function o(t){return new e(t)}export{o as createQueryParamsHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{getDeepValue as r}from\"../../core/object.js\";import{isSome as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import{urlToObject as i}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../request.js\";import n from\"../Task.js\";async function l(e,r){try{const{data:{supportedTravelModes:t,defaultTravelMode:s}}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\",token:r}});return{supportedTravelModes:t,defaultTravelMode:s}}catch(t){throw new o(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}async function c(e,t){const{data:s}=await a(e.substring(0,e.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\",token:t}});if(!s||!s.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=s.owningSystemUrl;const{data:o}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\",token:t}}),n=r(\"helperServices.routingUtilities.url\",o);if(!n)return{supportedTravelModes:[],defaultTravelMode:null};const l=i(e),c=/\\/solveClosestFacility$/.test(l.path)?\"Route\":/\\/solveClosestFacility$/.test(l.path)?\"ClosestFacility\":\"ServiceAreas\",u=await a(n+(\"/\"===n[n.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:c,token:t}}),p=[];let d=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const r of e)if(\"supportedTravelModes\"===r.paramName){if(r.value&&r.value.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);p.push(r)}}else\"defaultTravelMode\"===r.paramName&&(d=r.value)}return{supportedTravelModes:p,defaultTravelMode:d}}const u=r=>{let i=class extends r{async getServiceDescription(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(e)),this._serviceDescriptionPromise}async _fetchServiceDescription(e){if(!this.url||!this.parsedUrl)throw new o(\"network-service:missing-url\",\"Url to Network service is missing\");const r=this.url,{data:t}=await a(r,{query:{f:\"json\",token:e}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let o=0;o<t.supportedTravelModes.length;o++)t.supportedTravelModes[o].id||(t.supportedTravelModes[o].id=t.supportedTravelModes[o].itemId);const s=t.currentVersion>=10.4?l(r,e):c(r,e),{defaultTravelMode:i,supportedTravelModes:n}=await s;return t.defaultTravelMode=i,t.supportedTravelModes=n,t}_isInputGeometryZAware(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}};return i=e([s(\"esri.tasks.mixins.NAServiceDescription\")],i),i};let p=class extends(u(n)){};p=e([s(\"esri.tasks.mixins.NAServiceDescription\")],p);export{p as NAServiceDescription,u as NAServiceDescriptionMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import e from\"../../Graphic.js\";import p from\"./DirectionsFeatureSet.js\";let i=class extends s{constructor(o){super(o),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};o([r({type:p,json:{write:!0}})],i.prototype,\"directions\",void 0),o([r({type:e,json:{write:!0}})],i.prototype,\"route\",void 0),o([r({type:String,json:{write:!0}})],i.prototype,\"routeName\",void 0),o([r({type:[e],json:{write:!0}})],i.prototype,\"stops\",void 0),i=o([t(\"esri.tasks.support.RouteResult\")],i);var u=i;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as e}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import p from\"../../Graphic.js\";import i from\"./FeatureSet.js\";import a from\"./NAMessage.js\";import l from\"./RouteResult.js\";function n(r){return r&&i.fromJSON(r).features.map((r=>r))}let u=class extends t{constructor(r){super(r),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(r,o){return n(o.barriers||o.pointBarriers)}readPolylineBarriers(r){return n(r)}readPolygonBarriers(r){return n(r)}};r([o({aliasOf:\"pointBarriers\"})],u.prototype,\"barriers\",void 0),r([o({type:[a]})],u.prototype,\"messages\",void 0),r([o({type:[p]})],u.prototype,\"pointBarriers\",void 0),r([e(\"pointBarriers\",[\"barriers\",\"pointBarriers\"])],u.prototype,\"readPointBarriers\",null),r([o({type:[p]})],u.prototype,\"polylineBarriers\",void 0),r([e(\"polylineBarriers\")],u.prototype,\"readPolylineBarriers\",null),r([o({type:[p]})],u.prototype,\"polygonBarriers\",void 0),r([e(\"polygonBarriers\")],u.prototype,\"readPolygonBarriers\",null),r([o({type:[l]})],u.prototype,\"routeResults\",void 0),u=r([s(\"esri.tasks.support.RouteResultsContainer\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getDeepValue as e}from\"../core/object.js\";import{isSome as t}from\"../core/maybe.js\";import r from\"../core/Error.js\";import s from\"../request.js\";import{parseUrl as o}from\"./utils.js\";import a from\"../tasks/support/RouteResultsContainer.js\";function l(e,t,r,s){s[r]=[t.length,t.length+e.length],e.forEach((e=>{t.push(e.geometry)}))}function n(e,t){for(let r=0;r<t.length;r++){const s=e[t[r]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}function i(e){const t=[],r=[],{directions:s=[],routes:{features:o=[],spatialReference:l=null}={},stops:{features:n=[],spatialReference:i=null}={},barriers:u,polygonBarriers:d,polylineBarriers:p,messages:f}=e.data,c=\"esri.tasks.RouteTask.NULL_ROUTE_NAME\";let v,m,h=!0;const g=o&&l||n&&i||u&&u.spatialReference||d&&d.spatialReference||p&&p.spatialReference;s.forEach((e=>{t.push(v=e.routeName),r[v]={directions:e}})),o.forEach((e=>{-1===t.indexOf(v=e.attributes.Name)&&(t.push(v),r[v]={}),e.geometry&&(e.geometry.spatialReference=g),r[v].route=e})),n.forEach((e=>{m=e.attributes,-1===t.indexOf(v=m.RouteName||c)&&(t.push(v),r[v]={}),v!==c&&(h=!1),e.geometry&&(e.geometry.spatialReference=g),null==r[v].stops&&(r[v].stops=[]),r[v].stops.push(e)})),n.length>0&&!0===h&&(r[t[0]].stops=r[c].stops,delete r[c],t.splice(t.indexOf(c),1));const T=t.map((e=>(r[e].routeName=e===c?null:e,r[e])));return a.fromJSON({routeResults:T,pointBarriers:u,polygonBarriers:d,polylineBarriers:p,messages:f})}function u(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}async function d(e){if(!e)throw new r(\"network-service:missing-url\",\"Url to Network service is missing\");const{data:t}=await s(e,{query:{f:\"json\"}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let r=0;r<t.supportedTravelModes.length;r++)t.supportedTravelModes[r].id||(t.supportedTravelModes[r].id=t.supportedTravelModes[r].itemId);const o=t.currentVersion>=10.4?f(e):p(e),{defaultTravelMode:a,supportedTravelModes:l}=await o;return t.defaultTravelMode=a,t.supportedTravelModes=l,t}async function p(t){const{data:r}=await s(t.substring(0,t.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\"}});if(!r||!r.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};t=r.owningSystemUrl;const{data:a}=await s(t+(\"/\"===t[t.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\"}}),l=e(\"helperServices.routingUtilities.url\",a);if(!l)return{supportedTravelModes:[],defaultTravelMode:null};const n=o(t),i=/\\/solve$/.test(n.path)?\"Route\":/\\/solveClosestFacility$/.test(n.path)?\"ClosestFacility\":\"ServiceAreas\",u=await s(l+(\"/\"===l[l.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:i}}),d=[];let p=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const t of e)if(\"supportedTravelModes\"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);d.push(t)}}else\"defaultTravelMode\"===t.paramName&&(p=t.value)}return{supportedTravelModes:d,defaultTravelMode:p}}async function f(e){try{const{data:{supportedTravelModes:t,defaultTravelMode:r}}=await s(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\"}});return{supportedTravelModes:t,defaultTravelMode:r}}catch(t){throw new r(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}export{l as collectGeometries,n as dropZValuesOffInputGeometry,d as fetchServiceDescription,p as fetchTravelModesGP,i as handleSolveResponse,u as isInputGeometryZAware,f as retrieveTravelModes};\n"],"sourceRoot":""}