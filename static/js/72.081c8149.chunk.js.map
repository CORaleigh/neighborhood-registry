{"version":3,"sources":["../node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","../node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js","../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js","../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js","../node_modules/@arcgis/core/symbols/cim/SDFHelper.js","../node_modules/@arcgis/core/symbols/cim/Rasterizer.js"],"names":["r","constructor","rasterizeText","t","this","_textRasterizationCanvas","document","createElement","o","n","getContext","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","a","computeTextWidth","h","length","width","height","renderedLineHeight","Math","round","pixelRatio","renderedHaloSize","halo","size","renderedWidth","renderedHeight","fillStyle","slice","toString","i","color","haloStyle","e","l","d","c","s","textAlign","g","f","p","renderHalo","globalCompositeOperation","fillText","u","getImageData","x","Uint8Array","data","premultiplyColors","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","drawImage","lineWidth","strokeText","font","style","weight","family","textBaseline","horizontalAlignment","max","measureText","push","cos","PI","sin","Legend","Preview","targetSize","frame","xmax","xmin","ymax","ymin","referenceSize","scaleFactor","M","fill","legend","geometry","rings","canvasPaths","preview","stroke","paths","P","materialHash","cim","materialOverrides","analyzedCIM","hash","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","y","_textRasterizer","_pictureMarkerCache","centroid","symbol","type","z","analyzeCIMSymbol","Object","keys","map","name","alias","I","attributes","rasterizeCIMSymbol","geometryType","spatialReference","fields","fetchPictureMarkerResource","text","indexOf","textCase","Promise","all","get","url","responseType","signal","set","_getRasterizedResource","m","offsetX","offsetY","rotation","rotateClockwise","angle","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","C","min","createImageData","Uint8ClampedArray","rasterizedImage","_imageDataToCanvas","save","translate","rotate","restore","imageData","anchorPosition","_imageDataCanvas","putImageData","_imageTo32Array","_getPictureResource","_rasterizePictureResource","_embedCIMLayerInVectorMarker","markerPlacement","JSON","stringify","rasterizeJSONResource","_rasterizeTextResource","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","decoration","outlineColor","outlineSize","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply","markerGraphics","symbolLayers","async","maxSize","node","opacity","cimOptions","feature","fieldMap","clone","b","rasterizeCIMSymbolAsync","w","D","scale","ceil","Image","src","toDataURL","appendChild","getLogger","N","angleToLine","k","error","primitiveOverrides","valueExpressionInfo","expression","then","primitiveName","propertyName","value","getSize","angleAlignment","enable","findApplicableOverrides","L","X","J","O","templateHash","colorLocked","F","j","scaleX","effects","tintColor","colorSubstitutions","filter","separation","lineSymbol","W","capStyle","joinStyle","miterLimit","isOutline","cap","join","referenceWidth","zOrder","A","isDashed","S","stepY","gridAngle","scaleSymbolsProportionally","alignment","isAbsoluteAnchorPoint","anchorPointUnits","outlineWidth","frameHeight","sizeRatio","Y","H","underline","strikethrough","toLowerCase","fontStyleName","fontFamilyName","getFillColor","getStrokeColor","getStrokeWidth","haloSymbol","haloSize","R","Number","$","textString","v","geom","asFill","billboardMode3D","depth3D","respectFrame","clippingPath","getTextureAnchor","parseInt","substr","NaN","toRgba","Array","call","$view","fn","buildOverrideKey","T","parse","applyOverrides","transform","hasZ","hasM","referencesGeometry","repurposeFeature","evaluate","$feature","warn","floor","sqrt","dispose","_rasterizationCanvas","rasterizeSimpleFill","rasterizeSimpleLine","fromSimpleMarker","fromCIMHatchFill","fromCIMInsidePolygon","rasterize","rasterizeImageResource","ImageData","setAttribute","oldColor","newColor"],"mappings":"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","file":"static/js/72.081c8149.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";function e(t){return`rgb(${t.slice(0,3).toString()})`}function i(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class r{constructor(){}rasterizeText(t,r){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const o=this._textRasterizationCanvas,n=o.getContext(\"2d\");this.setFontProperties(n,r),this.parameters=r,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const a=this.computeTextWidth(n,r),h=this.lineHeight*this.textLines.length;o.width=a,o.height=h,this.renderedLineHeight=Math.round(this.lineHeight*r.pixelRatio),this.renderedHaloSize=r.halo.size*r.pixelRatio,this.renderedWidth=a*r.pixelRatio,this.renderedHeight=h*r.pixelRatio,this.fillStyle=i(r.color),this.haloStyle=e(r.halo.color);const l=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(n,r);const c=s(n.textAlign,this.renderedWidth)+d,g=d;let f=0,p=0;d>0&&this.renderHalo(n,c,g,f,p,r),p+=g,f+=c;for(const e of this.textLines)n.globalCompositeOperation=\"destination-out\",n.fillStyle=\"rgb(0, 0, 0)\",n.fillText(e,f,p),n.globalCompositeOperation=\"source-over\",n.fillStyle=this.fillStyle,n.fillText(e,f,p),p+=l;const u=n.getImageData(0,0,this.renderedWidth,this.renderedHeight),x=new Uint8Array(u.data);if(r.premultiplyColors){let t;for(let e=0;e<x.length;e+=4)t=x[e+3]/255,x[e]=x[e]*t,x[e+1]=x[e+1]*t,x[e+2]=x[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,r,s,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,r,s,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of o)t.fillText(n,e+s*r,i+s*a);i+=r}}renderHaloNative(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const o of this.textLines){const n=2*s,a=5,h=.1;for(let r=0;r<a;r++){const s=1-(a-1)*h+r*h;t.lineWidth=s*n,t.strokeText(o,e,i)}i+=r}}setFontProperties(e,i){const r=i.font,s=`${r.style} ${r.weight} ${t(i.size*i.pixelRatio)}px ${r.family}, sans-serif`;let o;switch(e.font=s,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const s of this.textLines)i=Math.max(i,t.measureText(s).width);const r=e.font;return(\"italic\"===r.style||\"oblique\"===r.style||\"string\"==typeof r.weight&&(\"bold\"===r.weight||\"bolder\"===r.weight)||\"number\"==typeof r.weight&&r.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}function s(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}const o=[];{const t=16;for(let e=0;e<360;e+=360/t)o.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export default r;export{r as TextRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{numericHash as e}from\"../../core/string.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{getJsonType as r,isPolygon as a,isPolyline as i}from\"../../geometry/support/jsonUtils.js\";import{pt2px as s}from\"../../core/screenUtils.js\";import o from\"../support/Symbol3DAnchorPosition2D.js\";import n from\"../../request.js\";import{createLabelOverrideFunction as c,evaluateValueOrFunction as l,colorToArray as m}from\"./utils.js\";import{scaleCIMMarker as h}from\"../support/cimSymbolUtils.js\";import{analyzeCIMSymbol as f,analyzeCIMResource as g}from\"./cimAnalyzer.js\";import y from\"./Rasterizer.js\";import{TextRasterizer as u}from\"./TextRasterizer.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,r)=>{if(e&&e.targetSize){let a;if(r){const t=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/s(t)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new y,this._textRasterizer=new u,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,a,i,s,o,n,c){i=i||(t?null!=t.centroid?\"esriGeometryPolygon\":r(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,a,i,c);return this.rasterizeCIMSymbol(l,t,i,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],n=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await f(e.data,n,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=c(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(e,t){const r=e.materialHash;if(!this._pictureMarkerCache.get(r)){const a=(await n(e.cim.url,{responseType:\"image\",signal:t&&t.signal})).data;this._pictureMarkerCache.set(r,a)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,m=e.anchorX||0,h=e.anchorY||0,f=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=l(n.offsetX,t,i,s)*e||0,y=l(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=l(n.rotation,t,i,s)||0,f=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=l(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":m=-.5;break;case\"right\":m=.5;break;default:m=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":h=.5;break;case\"bottom\":h=-.5;break;case\"baseline\":h=-.25;break;default:h=0}}}null!=e&&o.push({angle:c,rotateClockWise:f,anchorX:m,anchorY:h,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),r=t.getContext(\"2d\");let a=0,i=0,n=0,c=0;const l=[];for(let o=0;o<e.length;o++){const t=e[o],m=t.rasterizedResource;if(!m)continue;const h=m.size,f=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=s(f)-h[0]*(.5+y),C=s(g)-h[1]*(.5+u),I=M+h[0],z=C+h[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}a=M<a?M:a,i=C<i?C:i,n=I>n?I:n,c=z>c?z:c;const P=r.createImageData(m.size[0],m.size[1]);P.data.set(new Uint8ClampedArray(m.image.buffer));const x={offsetX:f,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};l.push(x)}t.width=n-a,t.height=c-i;const m=-a,h=c;for(let o=0;o<l.length;o++){const e=l[o],t=this._imageDataToCanvas(e.rasterizedImage),a=e.rasterizedImage.width,i=e.rasterizedImage.height,n=m-a*(.5+e.anchorX),c=h-i*(.5-e.anchorY);if(e.angle){const a=(360-e.angle)*Math.PI/180;r.save(),r.translate(s(e.offsetX),-s(e.offsetY)),r.translate(m,h),r.rotate(a),r.translate(-m,-h),r.drawImage(t,n,c),r.restore()}else r.drawImage(t,n+s(e.offsetX),c-s(e.offsetY))}const f=new o({x:m/t.width-.5,y:h/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:f}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(t,r,a,i,s,o){let n,c,m,f;if(\"esriGeometryPolyline\"===a||\"esriGeometryPolygon\"===a){const h=i&&i.style?i.style:p.Legend,f=\"esriGeometryPolyline\"===a?M.stroke[h]:M.fill[h];if(\"line\"===t.type){if(\"CIMSolidStroke\"!==t.cim.type){if(\"CIMPictureStroke\"===t.cim.type){const e=l(t.width,r,s,o),{image:a,width:i,height:n}=this._getPictureResource(t,e);return this._rasterizePictureResource(t,a,i,n,f,e)}return null}({analyzedCIM:n,hash:m}=P(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}else if(\"marker\"===t.type){if(\"CIMPictureMarker\"===t.cim.type)return null;if(\"CIMVectorMarker\"!==t.cim.type)return null;t.cim.offsetX=l(t.offsetX,r,s,o),t.cim.offsetY=l(t.offsetY,r,s,o),t.cim.rotation=l(t.rotation,r,s,o),t.cim.markerPlacement=t.markerPlacement,({analyzedCIM:n}=P(t,r,s,o)),m=e(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,f)}else{if(\"text\"===t.type)return null;if(\"fill\"===t.type){if(\"CIMHatchFill\"===t.cim.type||\"CIMVectorMarker\"===t.cim.type||\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type){const e=t.cim.size||t.cim.height;let a,i,c;if(\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type)({image:a,width:i,height:c}=this._getPictureResource(t,e));else{({analyzedCIM:n,hash:m}=P(t,r,s,o));const e=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=e.image,i=e.size[0],c=e.size[1]}return this._rasterizePictureResource(t,a,i,c,f,null)}if(\"CIMSolidFill\"!==t.cim.type)return null;({analyzedCIM:n,hash:m}=P(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}}}else{if(\"text\"===t.type)return f=this._rasterizeTextResource(t,r,i,s,o),f;({analyzedCIM:n,hash:m}=P(t,r,s,o));const e=d(i,t,null);if(\"CIMPictureMarker\"===t.cim.type){const a=l(t.size,r,s,o)*e,{image:i,width:n,height:c}=this._getPictureResource(t,a);return f={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:t.anchorPoint?t.anchorPoint.x:0,anchorY:t.anchorPoint?t.anchorPoint.y:0},f}h(n,e,{preserveOutlineWidth:!1}),c=n}m+=a,i&&(m+=JSON.stringify(i));const g=this._resourceCache;return g.has(m)?g.get(m):(f=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),g.set(m,f),f)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=l(e.text,t,a,i);if(!o||0===o.length)return null;const n=l(e.fontName,t,a,i),c=l(e.style,t,a,i),h=l(e.weight,t,a,i),f=l(e.decoration,t,a,i),g=l(e.size,t,a,i)*s,y=l(e.horizontalAlignment,t,a,i),u=l(e.verticalAlignment,t,a,i),p=m(l(e.color,t,a,i)),M=m(l(e.outlineColor,t,a,i)),C={color:p,size:g,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:h,decoration:f},halo:{size:l(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,r,o,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=s(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=s(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(r,o);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:s(e.cim.offsetX)||0,m42:s(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;a(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):i(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const a of d){const e=a?a.length:0;if(e>1){let t=a[0];m.moveTo(s(t[0]),s(t[1]));for(let r=1;r<e;++r)t=a[r],m.lineTo(s(t[0]),s(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const a=r.height/r.width,i=t?a>1?s(t):s(t)/a:r.width,o=t?a>1?s(t)*a:s(t):r.height;return{image:this._imageTo32Array(r,i,o),width:i,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=a(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=g(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{px2pt as t}from\"../../core/screenUtils.js\";import{getCIMSymbolSize as e,scaleCIMSymbolTo as a}from\"./cimSymbolUtils.js\";import{CIMSymbolRasterizer as l}from\"../cim/CIMSymbolRasterizer.js\";const i=new l(null,!0),o=120;async function n(l,n={}){const{size:s,maxSize:c,node:m,opacity:r}=n,y=n.cimOptions||n,{feature:d,fieldMap:h,geometryType:p,style:u}=y,g=e(l),f=Math.min(null!=s?s:g,null!=c?c:t(o));f!==g&&(l=l.clone(),a(l,f,{preserveOutlineWidth:!0}));let M=3;l&&l.data&&l.data.symbol&&\"CIMPointSymbol\"!==l.data.symbol.type&&(M=1);const b=await i.rasterizeCIMSymbolAsync(l,d,h,p,{scaleFactor:M,style:u}),w=document.createElement(\"canvas\");w.width=b.imageData.width,w.height=b.imageData.height;w.getContext(\"2d\").putImageData(b.imageData,0,0);let C=w.width/M,D=w.height/M;if(null!=s&&(null==(null==n?void 0:n.scale)||(null==n?void 0:n.scale))){const t=C/D;C=t<=1?Math.ceil(f*t):f,D=t<=1?f:Math.ceil(f/t)}const I=new Image(C,D);return I.src=w.toDataURL(),null!=r&&(I.style.opacity=`${r}`),m&&m.appendChild(I),I}export{n as previewCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{numericHash as e}from\"../../core/string.js\";import t from\"../../core/Logger.js\";import{createRendererExpression as i,ArcadeExpression as o}from\"../../support/arcadeOnDemand.js\";import r from\"../../Color.js\";import{pt2px as n}from\"../../core/screenUtils.js\";import{fromCIMColor as a,_adjustTextCase as l}from\"./utils.js\";import s from\"../../views/2d/arcade/callExpressionWithFeature.js\";import{CIMSymbolHelper as c,OverrideHelper as f}from\"./CIMSymbolHelper.js\";import{getExtent as m,getSDFMetrics as p}from\"./SDFHelper.js\";const u=t.getLogger(\"esri.symbols.cim.cimAnalyzer\");function y(e){switch(e){case\"Butt\":return 0;case\"Square\":return 2;case\"Round\":default:return 1}}function h(e){switch(e){case\"Bevel\":return 0;case\"Miter\":return 2;case\"Round\":default:return 1}}function g(e){switch(e){case\"Left\":default:return\"left\";case\"Right\":return\"right\";case\"Center\":return\"center\";case\"Justify\":return\"justify\"}}function d(e){switch(e){case\"Top\":default:return\"top\";case\"Center\":return\"middle\";case\"Baseline\":return\"baseline\";case\"Bottom\":return\"bottom\"}}function S(e){let t=\"normal\",i=\"normal\";if(e){const o=e.toLowerCase();-1!==o.indexOf(\"italic\")?t=\"italic\":-1!==o.indexOf(\"oblique\")&&(t=\"oblique\"),-1!==o.indexOf(\"bold\")?i=\"bold\":-1!==o.indexOf(\"light\")&&(i=\"lighter\")}return{style:t,weight:i}}function v(e){return e.underline?\"underline\":e.strikethrough?\"line-through\":\"none\"}function b(e,t,i,o){let r;e[t]?r=e[t]:(r={},e[t]=r),r[i]=o}function N(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function k(e,t,o,r){const n=o||[];if(!e)return n;let a,l;const s={};if(\"CIMSymbolReference\"!==e.type)return u.error(\"Expect cim type to be 'CIMSymbolReference'\"),n;if(a=e.symbol,l=e.primitiveOverrides,l){const e=[];for(const o of l){const r=o.valueExpressionInfo;if(r&&t){const n=r.expression,a=i(n,t.spatialReference,t.fields).then((e=>{e&&b(s,o.primitiveName,o.propertyName,e)}));e.push(a)}else null!=o.value&&b(s,o.primitiveName,o.propertyName,o.value)}await Promise.all(e)}switch(a.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":O(a,l,s,t,n,r)}return n}function O(e,t,i,o,r,n){if(!e)return;const a=e.symbolLayers;if(!a)return;let l;const s=c.getSize(e);\"CIMPointSymbol\"===e.type&&\"Map\"===e.angleAlignment&&(l=1);let m=a.length;for(;m--;){const c=a[m];if(!c||!1===c.enable)continue;const p=[];switch(f.findApplicableOverrides(c,t,p),c.type){case\"CIMSolidFill\":C(c,i,p,o,r);break;case\"CIMPictureFill\":P(c,i,p,o,r);break;case\"CIMHatchFill\":L(c,i,p,o,r);break;case\"CIMGradientFill\":M(c,i,p,o,r);break;case\"CIMSolidStroke\":X(c,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMPictureStroke\":I(c,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMGradientStroke\":x(c,i,p,o,r,\"CIMPolygonSymbol\"===e.type,s);break;case\"CIMCharacterMarker\":if(w(c,i,p,o,r))break;break;case\"CIMPictureMarker\":if(w(c,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(l=N(c)),z(c,i,p,o,r,l,s);break;case\"CIMVectorMarker\":if(w(c,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(l=N(c)),J(c,i,p,o,r,l,s,n);break;default:u.error(\"Cannot analyze CIM layer\",c.type)}}}function C(t,i,o,r,n){const l=t.primitiveName,s=a(t.color),c=e(JSON.stringify(t)).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,colorLocked:t.colorLocked,color:F(l,i,\"Color\",r,s,j),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t.effects})}function P(t,i,o,r,n){const l=t.primitiveName,s=t.tintColor?a(t.tintColor):{r:255,g:255,b:255,a:1},c=e(JSON.stringify(t)).toString(),f=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?f:()=>f,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:F(l,i,\"TintColor\",r,s,j),height:F(l,i,\"Height\",r,t.height),scaleX:F(l,i,\"ScaleX\",r,t.scaleX),angle:F(l,i,\"Rotation\",r,t.rotation),offsetX:F(l,i,\"OffsetX\",r,t.offsetX),offsetY:F(l,i,\"OffsetY\",r,t.offsetY)})}function L(t,i,o,r,n){const a=[\"Rotation\",\"OffsetX\",\"OffsetY\"],l=o.filter((e=>e.primitiveName!==t.primitiveName&&-1===a.indexOf(e.propertyName))),s=t.primitiveName,c=e(JSON.stringify(t)).toString(),f=e(`${t.separation}${JSON.stringify(t.lineSymbol)}`).toString();n.push({type:\"fill\",templateHash:c,materialHash:0===o.length?f:W(f,i,l,r),cim:t,materialOverrides:l,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:F(s,i,\"Separation\",r,t.separation),scaleX:1,angle:F(s,i,\"Rotation\",r,t.rotation),offsetX:F(s,i,\"OffsetX\",r,t.offsetX),offsetY:F(s,i,\"OffsetY\",r,t.offsetY)})}function M(t,i,o,r,n){const a=e(JSON.stringify(t)).toString();n.push({type:\"fill\",templateHash:a,materialHash:0===o.length?a:W(a,i,o,r),cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function X(t,i,o,r,n,l,s){const c=e(JSON.stringify(t)).toString(),f=t.primitiveName,m=a(t.color),p=void 0!==t.width?t.width:4,u=y(t.capStyle),g=h(t.joinStyle),d=t.miterLimit;n.push({type:\"line\",templateHash:c,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,isOutline:l,colorLocked:t.colorLocked,effects:t.effects,color:F(f,i,\"Color\",r,m,j),width:F(f,i,\"Width\",r,p),cap:F(f,i,\"CapStyle\",r,u),join:F(f,i,\"JoinStyle\",r,g),miterLimit:F(f,i,\"MiterLimit\",r,d),referenceWidth:s,zOrder:A(t.name),isDashed:!1})}function I(t,i,o,r,n,l,s){const c=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString(),f=t.primitiveName,m=a(t.tintColor),p=void 0!==t.width?t.width:4,u=y(t.capStyle),g=h(t.joinStyle),d=t.miterLimit,S=e(JSON.stringify(t)).toString();n.push({type:\"line\",templateHash:S,materialHash:0===o.length?c:()=>c,cim:t,materialOverrides:null,isOutline:l,colorLocked:t.colorLocked,effects:t.effects,color:F(f,i,\"TintColor\",r,m,j),width:F(f,i,\"Width\",r,p),cap:F(f,i,\"CapStyle\",r,u),join:F(f,i,\"JoinStyle\",r,g),miterLimit:F(f,i,\"MiterLimit\",r,d),referenceWidth:s,zOrder:A(t.name),isDashed:!1})}function x(t,i,o,r,n,a,l){const s=t.primitiveName,c=void 0!==t.width?t.width:4,f=y(t.capStyle),m=h(t.joinStyle),p=t.miterLimit,u=e(JSON.stringify(t)).toString();n.push({type:\"line\",templateHash:u,materialHash:0===o.length?u:W(u,i,o,r),cim:t,materialOverrides:null,isOutline:a,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},width:F(s,i,\"Width\",r,c),cap:F(s,i,\"CapStyle\",r,f),join:F(s,i,\"JoinStyle\",r,m),miterLimit:F(s,i,\"MiterLimit\",r,p),referenceWidth:l,zOrder:A(t.name),isDashed:!1})}function w(t,i,o,r,n){const a=t.markerPlacement;if(!a||\"CIMMarkerPlacementInsidePolygon\"!==a.type)return!1;const l=a,s=[\"Rotation\",\"OffsetX\",\"OffsetY\"],c=o.filter((e=>e.primitiveName!==t.primitiveName&&-1===s.indexOf(e.propertyName))),f=e(JSON.stringify(t)).toString();return n.push({type:\"fill\",templateHash:f,materialHash:0===o.length?f:W(f,i,c,r),cim:t,materialOverrides:c,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:F(l.primitiveName,i,\"StepY\",r,l.stepY),scaleX:1,angle:F(l.primitiveName,i,\"GridAngle\",r,l.gridAngle),offsetX:F(l.primitiveName,i,\"OffsetX\",r,l.offsetX),offsetY:F(l.primitiveName,i,\"OffsetY\",r,l.offsetY)}),!0}function z(t,i,o,r,n,l,s){const c=t.primitiveName,f=t.size,m=t.scaleX,p=t.rotation,u=t.offsetX,y=t.offsetY,h=a(t.tintColor),g=e(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();let d=!1,S=\"\";for(const e of o)e.primitiveName===c&&(void 0!==e.value?S+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(d=!0));n.push({type:\"marker\",templateHash:e(JSON.stringify(t)+S).toString(),materialHash:d?()=>g:g,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:!1,alignment:l,size:F(c,i,\"Size\",r,f),scaleX:F(c,i,\"ScaleX\",r,m),rotation:F(c,i,\"Rotation\",r,p),offsetX:F(c,i,\"OffsetX\",r,u),offsetY:F(c,i,\"OffsetY\",r,y),color:F(c,i,\"TintColor\",r,h,j),anchorPoint:t.anchorPoint,isAbsoluteAnchorPoint:\"Relative\"!==t.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:t.rotateClockwise,referenceSize:s,sizeRatio:1,markerPlacement:t.markerPlacement})}function J(e,t,i,o,r,n,a,l){const s=e.markerGraphics;if(!s)return;let c=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(c=t.ymax-t.ymin)}for(const f of s)if(f){const s=f.symbol;if(!s)continue;switch(s.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":Y(e,f,i,t,o,r,n,a,c,l);break;case\"CIMTextSymbol\":H(e,f,t,i,o,r,n,a,c)}}}function H(t,i,o,r,n,s,m,p,u){const y=[];f.findApplicableOverrides(i,r,y);const h=i.geometry;if(!(\"x\"in h)||!(\"y\"in h))return;const b=i.symbol,N=v(b),k=S(b.fontStyleName);b.font={family:b.fontFamilyName,decoration:N,...k};const O=t.frame,C=h.x-.5*(O.xmin+O.xmax),P=h.y-.5*(O.ymin+O.ymax),L=t.size/u,M=t.primitiveName,X=(b.height||0)*L,I=b.angle||0,x=((b.offsetX||0)+C)*L,w=((b.offsetY||0)+P)*L,z=a(c.getFillColor(b));let J=a(c.getStrokeColor(b)),H=c.getStrokeWidth(b);H||(J=a(c.getFillColor(b.haloSymbol)),H=b.haloSize*L);let Y=\"\";for(const e of r)e.primitiveName===M&&void 0!==e.value&&(Y+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`);const R=JSON.stringify(t.effects)+Number(t.colorLocked)+JSON.stringify(t.anchorPoint)+t.anchorPointUnits+JSON.stringify(t.markerPlacement),$=e(JSON.stringify(i)+R+Y).toString();s.push({type:\"text\",templateHash:$,materialHash:()=>e(JSON.stringify(b.font)).toString(),cim:b,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,alignment:m,anchorPoint:{x:t.anchorPoint?t.anchorPoint.x:0,y:t.anchorPoint?t.anchorPoint.y:0},isAbsoluteAnchorPoint:\"Relative\"!==t.anchorPointUnits,fontName:b.fontFamilyName,decoration:\"none\",weight:\"normal\",style:\"normal\",size:F(M,o,\"Size\",n,X),angle:F(M,o,\"Rotation\",n,I),offsetX:F(M,o,\"OffsetX\",n,x),offsetY:F(M,o,\"OffsetY\",n,w),horizontalAlignment:g(b.horizontalAlignment),verticalAlignment:d(b.verticalAlignment),text:F(i.primitiveName,o,\"TextString\",n,i.textString,l,b.textCase),color:z,outlineColor:J,outlineSize:H,referenceSize:p,sizeRatio:1,markerPlacement:t.markerPlacement})}function Y(t,i,o,r,n,l,s,f,u,y){const h=i.symbol,g=i.geometry;if(!g)return;const d=h.symbolLayers;if(!d)return;if(y)return void R(t,i,r,o,n,l,s,f,u);let S=d.length;for(;S--;){const y=d[S];if(y&&!1!==y.enable)switch(y.type){case\"CIMSolidFill\":case\"CIMSolidStroke\":{const h=m(g);if(!h)continue;const[d,S,v]=p(h,t.frame,t.size,t.anchorPoint,\"Relative\"!==t.anchorPointUnits),b=\"CIMSolidFill\"===y.type,N={type:\"sdf\",geom:g,asFill:b},k=t.primitiveName,O=t.size,C=t.rotation||0,P=t.offsetX,L=t.offsetY,M=y.primitiveName,X=a(b?c.getFillColor(y):c.getStrokeColor(y)),I=b?{r:0,g:0,b:0,a:0}:a(c.getStrokeColor(y)),x=c.getStrokeWidth(y);if(!b&&!x)break;let w=!1,z=\"\";for(const e of o)e.primitiveName!==M&&e.primitiveName!==k||(void 0!==e.value?z+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(w=!0));const J=JSON.stringify({...t,markerGraphics:null}),H=e(JSON.stringify(N)).toString(),Y={type:\"marker\",templateHash:e(JSON.stringify(i)+JSON.stringify(y)+J+z).toString(),materialHash:w?()=>H:H,cim:N,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:S,y:v},isAbsoluteAnchorPoint:!1,size:F(t.primitiveName,r,\"Size\",n,O),rotation:F(t.primitiveName,r,\"Rotation\",n,C),offsetX:F(t.primitiveName,r,\"OffsetX\",n,P),offsetY:F(t.primitiveName,r,\"OffsetY\",n,L),scaleX:1,frameHeight:u,rotateClockwise:t.rotateClockwise,referenceSize:f,sizeRatio:d,color:F(M,r,\"Color\",n,X,j),outlineColor:F(M,r,\"Color\",n,I,j),outlineWidth:F(M,r,\"Width\",n,x),markerPlacement:t.markerPlacement};l.push(Y);break}default:R(t,i,r,o,n,l,s,f,u)}}}function R(t,i,o,r,a,l,s,f,m){const p=$(t,i);let u=[];const y=[\"Rotation\",\"OffsetX\",\"OffsetY\"];u=r.filter((e=>e.primitiveName!==t.primitiveName||-1===y.indexOf(e.propertyName)));let h=\"\";for(const e of r)void 0!==e.value&&(h+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`);const[g,d,S]=c.getTextureAnchor(p),v=t.primitiveName,b=t.rotation||0,N=t.offsetX||0,k=t.offsetY||0,O=e(JSON.stringify(p)+h).toString(),C={type:\"marker\",templateHash:O,materialHash:0===u.length?O:W(O,o,u,a),cim:p,materialOverrides:u,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:g,y:d},isAbsoluteAnchorPoint:!1,size:t.size,rotation:F(v,o,\"Rotation\",a,b),offsetX:F(v,o,\"OffsetX\",a,N),offsetY:F(v,o,\"OffsetY\",a,k),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:m,rotateClockwise:t.rotateClockwise,referenceSize:f,sizeRatio:S/n(t.size),markerPlacement:t.markerPlacement};l.push(C)}function $(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}function A(e){if(e&&0===e.indexOf(\"Level_\")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function j(e){if(!e||0===e.length)return null;const t=new r(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function F(e,t,i,r,n,a,l){const c=t[e];if(c){const e=c[i];if(\"string\"==typeof e||\"number\"==typeof e||e instanceof Array)return a?a.call(null,e,l):e;if(null!=e&&e instanceof o)return(t,i,o)=>{let c=s(e,t,{$view:o},r.geometryType,i);return null!==c&&a&&(c=a.call(null,c,l)),null!==c?c:n}}return n}function W(t,i,r,n){for(const e of r){if(e.valueExpressionInfo){const t=i[e.primitiveName]&&i[e.primitiveName][e.propertyName];t instanceof o&&(e.fn=(e,i,o)=>s(t,e,{$view:o},n.geometryType,i))}}return(i,o,n)=>{for(const e of r)e.fn&&(e.value=e.fn(i,o,n));return e(t+f.buildOverrideKey(r)).toString()}}function T(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return f.applyOverrides(i,t),i}export{T as analyzeCIMResource,k as analyzeCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import{unquantizeMultipoint as t,unquantizePolyline as o,unquantizePolygon as n,unquantizePoint as a}from\"../../../geometry/support/quantizationUtils.js\";function s(r,t,o,n,a){const s=r.referencesGeometry()&&a?u(t,n,a):t,i=r.repurposeFeature(s);try{return r.evaluate({...o,$feature:i})}catch(c){return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",c),null}}const i=new Map;function u(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;i.has(r)||i.set(r,c(r));const s=i.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}function c(s){const i={};switch(s){case\"esriGeometryPoint\":return(e,r,t,o)=>a(r,i,e,t,o);case\"esriGeometryPolygon\":return(e,r,t,o)=>n(r,i,e,t,o);case\"esriGeometryPolyline\":return(e,r,t,n)=>o(r,i,e,t,n);case\"esriGeometryMultipoint\":return(e,r,o,n)=>t(r,i,e,o,n);default:return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").error(new r(\"mapview-arcade\",`Unable to handle geometryType: ${s}`)),e=>e}}export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isExtent as t}from\"../../geometry/support/jsonUtils.js\";import n from\"./Rect.js\";import{packFloatRGBA as o}from\"./packingUtils.js\";function r(t){if(!t)return null;switch(t.type){case\"CIMPointSymbol\":{const n=t.symbolLayers;return n&&1===n.length?r(n[0]):null}case\"CIMVectorMarker\":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.geometry;if(!r)return null;const l=o.symbol;return!l||\"CIMPolygonSymbol\"!==l.type&&\"CIMLineSymbol\"!==l.type?null:{geom:r,asFill:\"CIMPolygonSymbol\"===l.type}}case\"sdf\":return{geom:t.geom,asFill:t.asFill}}return null}function l(t){const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.symbol;return!r||\"CIMPolygonSymbol\"!==r.type&&\"CIMLineSymbol\"!==r.type?null:r}function e(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function i(t){let o=1/0,r=-1/0,l=1/0,e=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<l&&(l=t[1]),t[1]>e&&(e=t[1]);return new n(o,l,r-o,e-l)}function s(t){let n=1/0,o=-1/0,r=1/0,l=-1/0;for(const e of t)for(const t of e)t[0]<n&&(n=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>l&&(l=t[1]);return[n,r,o,l]}function f(n){return n?n.rings?s(n.rings):n.paths?s(n.paths):t(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function m(t,n,o,r,l){const[e,i,s,f]=t;if(s<e||f<i)return[0,0,0];const m=s-e,a=f-i,c=128,u=1,y=Math.floor(.5*(.5*c-u)),h=(c-2*(y+u))/Math.max(m,a),x=Math.round(m*h)+2*y,M=Math.round(a*h)+2*y;let g=1;if(n){g=M/h/(n.ymax-n.ymin)}let p=0,d=0;if(r)if(l){if(n&&o&&n.ymax-n.ymin>0){const t=(n.xmax-n.xmin)/(n.ymax-n.ymin);p=r.x/(o*t),d=r.y/o}}else p=r.x,d=r.y;p=.5*(n.xmax+n.xmin)+p*(n.xmax-n.xmin),d=.5*(n.ymax+n.ymin)+d*(n.ymax-n.ymin),p-=e,d-=i,p*=h,d*=h,p+=y,d+=y;return[g,p/x-.5,-(d/M-.5)]}function a(t){const n=e(t.geom),o=i(n),r=128,l=1,s=Math.floor(.5*(.5*r-l)),f=(r-2*(s+l))/Math.max(o.width,o.height),m=Math.round(o.width*f)+2*s,a=Math.round(o.height*f)+2*s,h=[];for(const e of n)if(e&&e.length>1){const n=[];for(const t of e){let[r,l]=t;r-=o.x,l-=o.y,r*=f,l*=f,r+=s-.5,l+=s-.5,n.push([r,l])}if(t.asFill){const t=n.length-1;n[0][0]===n[t][0]&&n[0][1]===n[t][1]||n.push(n[0])}h.push(n)}const x=c(h,m,a,s);return t.asFill&&u(h,m,a,s,x),[y(x,s),m,a]}function c(t,n,o,r){const l=n*o,e=new Array(l),i=r*r+1;for(let s=0;s<l;++s)e[s]=i;for(const s of t){const t=s.length;for(let l=1;l<t;++l){const t=s[l-1],i=s[l];let f,m,a,c;t[0]<i[0]?(f=t[0],m=i[0]):(f=i[0],m=t[0]),t[1]<i[1]?(a=t[1],c=i[1]):(a=i[1],c=t[1]);let u=Math.floor(f)-r,y=Math.floor(m)+r,h=Math.floor(a)-r,x=Math.floor(c)+r;u<0&&(u=0),y>n&&(y=n),h<0&&(h=0),x>o&&(x=o);const M=i[0]-t[0],g=i[1]-t[1],p=M*M+g*g;for(let r=u;r<y;r++)for(let l=h;l<x;l++){let s,f,m=(r-t[0])*M+(l-t[1])*g;m<0?(s=t[0],f=t[1]):m>p?(s=i[0],f=i[1]):(m/=p,s=t[0]+m*M,f=t[1]+m*g);const a=(r-s)*(r-s)+(l-f)*(l-f),c=(o-l-1)*n+r;a<e[c]&&(e[c]=a)}}}for(let s=0;s<l;++s)e[s]=Math.sqrt(e[s]);return e}function u(t,n,o,r,l){for(const e of t){const t=e.length;for(let i=1;i<t;++i){const t=e[i-1],s=e[i];let f,m,a,c;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],c=s[1]):(a=s[1],c=t[1]);let u=Math.floor(f),y=Math.floor(m)+1,h=Math.floor(a),x=Math.floor(c)+1;u<r&&(u=r),y>n-r&&(y=n-r),h<r&&(h=r),x>o-r&&(x=o-r);for(let e=h;e<x;++e){if(t[1]>e==s[1]>e)continue;const i=(o-e-1)*n;for(let n=u;n<y;++n)n<(s[0]-t[0])*(e-t[1])/(s[1]-t[1])+t[0]&&(l[i+n]=-l[i+n]);for(let t=r;t<u;++t)l[i+t]=-l[i+t]}}}}function y(t,n){const r=2*n,l=t.length,e=new Uint8Array(4*l);for(let i=0;i<l;++i){const n=.5-t[i]/r;o(n,e,4*i)}return e}export{a as buildSDF,f as getExtent,r as getSDFInfo,m as getSDFMetrics,l as getSDFSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{resampleHermite as e}from\"./utils.js\";import r from\"./Rect.js\";import{SymbolHelper as t,CIMSymbolHelper as a}from\"./CIMSymbolHelper.js\";import{getSDFInfo as n,buildSDF as i}from\"./SDFHelper.js\";const s=512;class o{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===e.type||\"esriSFS\"===e.type){const[r,a,n]=t.rasterizeSimpleFill(this._rasterizationCanvas,e.style,s);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===e.type||\"esriSLS\"===e.type){const[r,a,n]=t.rasterizeSimpleLine(e.style,e.cap);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===e.type||\"esriSMS\"===e.type||\"line-marker\"===e.type?(m=a.fromSimpleMarker(e),f=n(m)):\"CIMHatchFill\"===e.type?(m=a.fromCIMHatchFill(e),l=new r(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):e.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===e.markerPlacement.type?(m=a.fromCIMInsidePolygon(e),l=new r(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=e,f=n(m)),f&&!o){const[e,r,t]=i(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=a.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(r,t,a,n){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=r,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext(\"2d\");a instanceof ImageData?i.putImageData(a,0,0):(a.setAttribute(\"width\",`${r}px`),a.setAttribute(\"height\",`${t}px`),i.drawImage(a,0,0,r,t));const o=i.getImageData(0,0,r,t),m=new Uint8Array(o.data);if(n)for(const e of n)if(e&&e.oldColor&&4===e.oldColor.length&&e.newColor&&4===e.newColor.length){const[r,t,a,n]=e.oldColor,[i,s,o,l]=e.newColor;if(r===i&&t===s&&a===o&&n===l)continue;for(let e=0;e<m.length;e+=4)r===m[e]&&t===m[e+1]&&a===m[e+2]&&n===m[e+3]&&(m[e]=i,m[e+1]=s,m[e+2]=o,m[e+3]=l)}let l;for(let e=0;e<m.length;e+=4)l=m[e+3]/255,m[e]=m[e]*l,m[e+1]=m[e+1]*l,m[e+2]=m[e+2]*l;let f=m,c=r,h=t;const p=s;if(c>=p||h>=p){const a=c/h;a>1?(c=p,h=Math.round(p/a)):(h=p,c=Math.round(p*a)),f=new Uint8Array(4*c*h);const n=new Uint8ClampedArray(f.buffer);e(m,r,t,n,c,h,!1)}return{size:[r,t],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export default o;\n"],"sourceRoot":""}