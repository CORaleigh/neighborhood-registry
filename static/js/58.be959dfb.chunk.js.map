{"version":3,"sources":["../node_modules/@arcgis/core/rest/route.js","../node_modules/@arcgis/core/tasks/RouteTask.js","../node_modules/@arcgis/core/tasks/support/GPMessage.js","../node_modules/@arcgis/core/tasks/support/NAMessage.js","../node_modules/@arcgis/core/tasks/support/DirectionsFeatureSet.js","../node_modules/@arcgis/core/core/queryUtils.js","../node_modules/@arcgis/core/tasks/mixins/NAServiceDescription.js","../node_modules/@arcgis/core/tasks/support/RouteResult.js","../node_modules/@arcgis/core/tasks/support/RouteResultsContainer.js","../node_modules/@arcgis/core/rest/networkUtils.js"],"names":["p","s","accumulateAttributes","name","attributeParameterValues","directionsTimeAttribute","impedanceAttribute","outSpatialReference","getter","e","wkid","pointBarriers","polylineBarriers","polygonBarriers","restrictionAttributes","stops","travelMode","t","o","constructor","r","super","solve","async","m","l","c","f","y","B","h","features","then","push","slice","i","a","path","Promise","resolve","dontCheck","hasZ","n","forEach","get","geometry","query","toQueryParams","endsWith","u","this","url","esriJobMessageTypeInformative","esriJobMessageTypeProcessDefinition","esriJobMessageTypeProcessStart","esriJobMessageTypeProcessStop","esriJobMessageTypeWarning","esriJobMessageTypeError","esriJobMessageTypeEmpty","esriJobMessageTypeAbort","description","type","String","json","write","prototype","read","0","1","2","3","50","100","101","200","extent","geometryType","routeId","routeName","totalDriveTime","totalLength","totalTime","readFeatures","_decompressFeatureGeometry","summary","envelope","spatialReference","fromJSON","map","strings","events","x","point","z","attributes","ETA","arriveTimeUTC","_mergePolylinesToSinglePath","_decompressGeometry","compressedGeometry","g","d","match","parseInt","indexOf","length","paths","hasM","concat","source","readOnly","value","_options","toJSON","Object","keys","Array","isArray","join","JSON","stringify","_serviceDescriptionPromise","_fetchServiceDescription","parsedUrl","data","token","supportedTravelModes","id","itemId","currentVersion","defaultTravelMode","error","substring","owningSystemUrl","test","serviceName","results","paramName","parse","TravelMode","_isInputGeometryZAware","_dropZValuesOffInputGeometry","console","log","directions","route","barriers","messages","routeResults","readPointBarriers","readPolylineBarriers","readPolygonBarriers","aliasOf","routes","v","Name","RouteName","splice","T"],"mappings":"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","file":"static/js/58.be959dfb.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{normalizeCentralMeridian as r}from\"../geometry/support/normalizeUtils.js\";import{parseUrl as t}from\"./utils.js\";import{createQueryParamsHelper as s}from\"../core/queryUtils.js\";import{collectGeometries as o,isInputGeometryZAware as i,fetchServiceDescription as a,dropZValuesOffInputGeometry as n,handleSolveResponse as u}from\"./networkUtils.js\";const p=s({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},stops:!0,travelMode:!0});async function m(s,m,l){const c=[],f=[],y={},B={},h=t(s);return m.stops&&m.stops.features&&o(m.stops.features,f,\"stops.features\",y),m.pointBarriers&&m.pointBarriers.features&&o(m.pointBarriers.features,f,\"pointBarriers.features\",y),m.polylineBarriers&&m.polylineBarriers.features&&o(m.polylineBarriers.features,f,\"polylineBarriers.features\",y),m.polygonBarriers&&m.polygonBarriers.features&&o(m.polygonBarriers.features,f,\"polygonBarriers.features\",y),r(f).then((e=>{for(const r in y){const t=y[r];c.push(r),B[r]=e.slice(t[0],t[1])}return i(B,c)?a(h.path):Promise.resolve({dontCheck:!0})})).then((r=>{(\"dontCheck\"in r?r.dontCheck:r.hasZ)||n(B,c);for(const e in B)B[e].forEach(((r,t)=>{m.get(e)[t].geometry=r}));const t={...l,query:{...h.query,...p.toQueryParams(m),f:\"json\"}},{path:s}=h,o=\"/solve\",i=s.endsWith(o)?s:s+o;return e(i,t)})).then((e=>u(e)))}export{m as solve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import o from\"./Task.js\";import{solve as e}from\"../rest/route.js\";import{NAServiceDescriptionMixin as t}from\"./mixins/NAServiceDescription.js\";let p=class extends(t(o)){constructor(r){super(r)}solve(r,s){return e(this.url,r,s)}};p=r([s(\"esri.tasks.RouteTask\")],p);var c=p;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";const p=new s({esriJobMessageTypeInformative:\"informative\",esriJobMessageTypeProcessDefinition:\"process-definition\",esriJobMessageTypeProcessStart:\"process-start\",esriJobMessageTypeProcessStop:\"process-stop\",esriJobMessageTypeWarning:\"warning\",esriJobMessageTypeError:\"error\",esriJobMessageTypeEmpty:\"empty\",esriJobMessageTypeAbort:\"abort\"});let i=class extends t{constructor(r){super(r),this.description=null,this.type=null}};r([e({type:String,json:{write:!0}})],i.prototype,\"description\",void 0),r([e({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([o(\"esri.tasks.support.GPMessage\")],i);var a=i;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import t from\"./GPMessage.js\";const p=new s({0:\"informative\",1:\"process-definition\",2:\"process-start\",3:\"process-stop\",50:\"warning\",100:\"error\",101:\"empty\",200:\"abort\"});let i=class extends t{constructor(r){super(r),this.type=null}};r([o({type:String,json:{read:p.read,write:p.write}})],i.prototype,\"type\",void 0),i=r([e(\"esri.tasks.support.NAMessage\")],i);var c=i;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{unwrap as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../geometry/SpatialReference.js\";import p from\"../../geometry/Point.js\";import n from\"../../geometry/Extent.js\";import i from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import m from\"../../Graphic.js\";import l from\"./FeatureSet.js\";let u=class extends l{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType=\"polyline\",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,r){(e||[]).forEach((e=>{this._decompressFeatureGeometry(e,r.summary.envelope.spatialReference)}));const o=a.fromJSON(r.spatialReference);return e.map((e=>{const r=m.fromJSON(e),s=e.geometry&&e.geometry.spatialReference;return r.geometry&&!s&&(t(r.geometry).spatialReference=o),r.strings=e.strings,r.events=(e.events||[]).map((t=>{const r=new m({geometry:new p({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),r}))}get mergedGeometry(){if(!this.features)return null;const e=this.features.map((({geometry:e})=>t(e))),r=this.get(\"extent.spatialReference\");return this._mergePolylinesToSinglePath(e,r)}get strings(){return this.features.map((({strings:e})=>e))}_decompressFeatureGeometry(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}_decompressGeometry(e,t){let r=0,o=0,s=0,a=0;const p=[];let n,i,m,l,u,c,y,g,h=0,f=0,d=0;if(u=e.match(/((\\+|\\-)[^\\+\\-\\|]+|\\|)/g),u||(u=[]),0===parseInt(u[h],32)){h=2;const e=parseInt(u[h],32);h++,c=parseInt(u[h],32),h++,1&e&&(f=u.indexOf(\"|\")+1,y=parseInt(u[f],32),f++),2&e&&(d=u.indexOf(\"|\",f)+1,g=parseInt(u[d],32),d++)}else c=parseInt(u[h],32),h++;for(;h<u.length&&\"|\"!==u[h];){n=parseInt(u[h],32)+r,h++,r=n,i=parseInt(u[h],32)+o,h++,o=i;const e=[n/c,i/c];f&&(l=parseInt(u[f],32)+s,f++,s=l,e.push(l/y)),d&&(m=parseInt(u[d],32)+a,d++,a=m,e.push(m/g)),p.push(e)}return{paths:[p],hasZ:f>0,hasM:d>0,spatialReference:t}}_mergePolylinesToSinglePath(e,t){let r=[];(e||[]).forEach((e=>{e.paths.forEach((e=>{r=r.concat(e)}))}));const o=[];let s=[0,0];return r.forEach((e=>{e[0]===s[0]&&e[1]===s[1]||(o.push(e),s=e)})),new i({paths:[o]},t)}};e([r({type:n,json:{read:{source:\"summary.envelope\"}}})],u.prototype,\"extent\",void 0),e([r()],u.prototype,\"features\",void 0),e([o(\"features\")],u.prototype,\"readFeatures\",null),e([r()],u.prototype,\"geometryType\",void 0),e([r({readOnly:!0})],u.prototype,\"mergedGeometry\",null),e([r()],u.prototype,\"routeId\",void 0),e([r()],u.prototype,\"routeName\",void 0),e([r({value:null,readOnly:!0})],u.prototype,\"strings\",null),e([r({json:{read:{source:\"summary.totalDriveTime\"}}})],u.prototype,\"totalDriveTime\",void 0),e([r({json:{read:{source:\"summary.totalLength\"}}})],u.prototype,\"totalLength\",void 0),e([r({json:{read:{source:\"summary.totalTime\"}}})],u.prototype,\"totalTime\",void 0),u=e([s(\"esri.tasks.support.DirectionsFeatureSet\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=t=>{if(!Array.isArray(t))return!1;const[e]=t;return\"number\"==typeof e||\"string\"==typeof e};class e{constructor(t={}){this._options=t}toQueryParams(e){if(!e)return null;const o=e.toJSON(),n={};return Object.keys(o).forEach((e=>{const r=this._options[e];if(r){const s=\"boolean\"!=typeof r&&r.name?r.name:e,i=\"boolean\"!=typeof r&&r.getter?r.getter(o):o[e];null!=i&&(n[s]=t(i)?i.join(\",\"):\"object\"==typeof i?JSON.stringify(i):i)}else n[e]=o[e]}),this),n}}function o(t){return new e(t)}export{o as createQueryParamsHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{getDeepValue as r}from\"../../core/object.js\";import{isSome as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import{urlToObject as i}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../request.js\";import n from\"../Task.js\";async function l(e,r){try{const{data:{supportedTravelModes:t,defaultTravelMode:s}}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\",token:r}});return{supportedTravelModes:t,defaultTravelMode:s}}catch(t){throw new o(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}async function c(e,t){const{data:s}=await a(e.substring(0,e.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\",token:t}});if(!s||!s.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=s.owningSystemUrl;const{data:o}=await a(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\",token:t}}),n=r(\"helperServices.routingUtilities.url\",o);if(!n)return{supportedTravelModes:[],defaultTravelMode:null};const l=i(e),c=/\\/solveClosestFacility$/.test(l.path)?\"Route\":/\\/solveClosestFacility$/.test(l.path)?\"ClosestFacility\":\"ServiceAreas\",u=await a(n+(\"/\"===n[n.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:c,token:t}}),p=[];let d=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const r of e)if(\"supportedTravelModes\"===r.paramName){if(r.value&&r.value.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);p.push(r)}}else\"defaultTravelMode\"===r.paramName&&(d=r.value)}return{supportedTravelModes:p,defaultTravelMode:d}}const u=r=>{let i=class extends r{async getServiceDescription(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(e)),this._serviceDescriptionPromise}async _fetchServiceDescription(e){if(!this.url||!this.parsedUrl)throw new o(\"network-service:missing-url\",\"Url to Network service is missing\");const r=this.url,{data:t}=await a(r,{query:{f:\"json\",token:e}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let o=0;o<t.supportedTravelModes.length;o++)t.supportedTravelModes[o].id||(t.supportedTravelModes[o].id=t.supportedTravelModes[o].itemId);const s=t.currentVersion>=10.4?l(r,e):c(r,e),{defaultTravelMode:i,supportedTravelModes:n}=await s;return t.defaultTravelMode=i,t.supportedTravelModes=n,t}_isInputGeometryZAware(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}};return i=e([s(\"esri.tasks.mixins.NAServiceDescription\")],i),i};let p=class extends(u(n)){};p=e([s(\"esri.tasks.mixins.NAServiceDescription\")],p);export{p as NAServiceDescription,u as NAServiceDescriptionMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import e from\"../../Graphic.js\";import p from\"./DirectionsFeatureSet.js\";let i=class extends s{constructor(o){super(o),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};o([r({type:p,json:{write:!0}})],i.prototype,\"directions\",void 0),o([r({type:e,json:{write:!0}})],i.prototype,\"route\",void 0),o([r({type:String,json:{write:!0}})],i.prototype,\"routeName\",void 0),o([r({type:[e],json:{write:!0}})],i.prototype,\"stops\",void 0),i=o([t(\"esri.tasks.support.RouteResult\")],i);var u=i;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as e}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import p from\"../../Graphic.js\";import i from\"./FeatureSet.js\";import a from\"./NAMessage.js\";import l from\"./RouteResult.js\";function n(r){return r&&i.fromJSON(r).features.map((r=>r))}let u=class extends t{constructor(r){super(r),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(r,o){return n(o.barriers||o.pointBarriers)}readPolylineBarriers(r){return n(r)}readPolygonBarriers(r){return n(r)}};r([o({aliasOf:\"pointBarriers\"})],u.prototype,\"barriers\",void 0),r([o({type:[a]})],u.prototype,\"messages\",void 0),r([o({type:[p]})],u.prototype,\"pointBarriers\",void 0),r([e(\"pointBarriers\",[\"barriers\",\"pointBarriers\"])],u.prototype,\"readPointBarriers\",null),r([o({type:[p]})],u.prototype,\"polylineBarriers\",void 0),r([e(\"polylineBarriers\")],u.prototype,\"readPolylineBarriers\",null),r([o({type:[p]})],u.prototype,\"polygonBarriers\",void 0),r([e(\"polygonBarriers\")],u.prototype,\"readPolygonBarriers\",null),r([o({type:[l]})],u.prototype,\"routeResults\",void 0),u=r([s(\"esri.tasks.support.RouteResultsContainer\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getDeepValue as e}from\"../core/object.js\";import{isSome as t}from\"../core/maybe.js\";import r from\"../core/Error.js\";import s from\"../request.js\";import{parseUrl as o}from\"./utils.js\";import a from\"../tasks/support/RouteResultsContainer.js\";function l(e,t,r,s){s[r]=[t.length,t.length+e.length],e.forEach((e=>{t.push(e.geometry)}))}function n(e,t){for(let r=0;r<t.length;r++){const s=e[t[r]];if(s&&s.length)for(const e of s)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}function i(e){const t=[],r=[],{directions:s=[],routes:{features:o=[],spatialReference:l=null}={},stops:{features:n=[],spatialReference:i=null}={},barriers:u,polygonBarriers:d,polylineBarriers:p,messages:f}=e.data,c=\"esri.tasks.RouteTask.NULL_ROUTE_NAME\";let v,m,h=!0;const g=o&&l||n&&i||u&&u.spatialReference||d&&d.spatialReference||p&&p.spatialReference;s.forEach((e=>{t.push(v=e.routeName),r[v]={directions:e}})),o.forEach((e=>{-1===t.indexOf(v=e.attributes.Name)&&(t.push(v),r[v]={}),e.geometry&&(e.geometry.spatialReference=g),r[v].route=e})),n.forEach((e=>{m=e.attributes,-1===t.indexOf(v=m.RouteName||c)&&(t.push(v),r[v]={}),v!==c&&(h=!1),e.geometry&&(e.geometry.spatialReference=g),null==r[v].stops&&(r[v].stops=[]),r[v].stops.push(e)})),n.length>0&&!0===h&&(r[t[0]].stops=r[c].stops,delete r[c],t.splice(t.indexOf(c),1));const T=t.map((e=>(r[e].routeName=e===c?null:e,r[e])));return a.fromJSON({routeResults:T,pointBarriers:u,polygonBarriers:d,polylineBarriers:p,messages:f})}function u(e,r){for(let s=0;s<r.length;s++){const o=e[r[s]];if(o&&o.length)for(const e of o)if(t(e)&&e.hasZ)return!0}return!1}async function d(e){if(!e)throw new r(\"network-service:missing-url\",\"Url to Network service is missing\");const{data:t}=await s(e,{query:{f:\"json\"}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let r=0;r<t.supportedTravelModes.length;r++)t.supportedTravelModes[r].id||(t.supportedTravelModes[r].id=t.supportedTravelModes[r].itemId);const o=t.currentVersion>=10.4?f(e):p(e),{defaultTravelMode:a,supportedTravelModes:l}=await o;return t.defaultTravelMode=a,t.supportedTravelModes=l,t}async function p(t){const{data:r}=await s(t.substring(0,t.indexOf(\"/rest/\")+6)+\"info\",{query:{f:\"json\"}});if(!r||!r.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};t=r.owningSystemUrl;const{data:a}=await s(t+(\"/\"===t[t.length-1]?\"\":\"/\")+\"sharing/rest/portals/self\",{query:{f:\"json\"}}),l=e(\"helperServices.routingUtilities.url\",a);if(!l)return{supportedTravelModes:[],defaultTravelMode:null};const n=o(t),i=/\\/solve$/.test(n.path)?\"Route\":/\\/solveClosestFacility$/.test(n.path)?\"ClosestFacility\":\"ServiceAreas\",u=await s(l+(\"/\"===l[l.length-1]?\"\":\"/\")+\"GetTravelModes/execute\",{query:{f:\"json\",serviceName:i}}),d=[];let p=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const t of e)if(\"supportedTravelModes\"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);d.push(t)}}else\"defaultTravelMode\"===t.paramName&&(p=t.value)}return{supportedTravelModes:d,defaultTravelMode:p}}async function f(e){try{const{data:{supportedTravelModes:t,defaultTravelMode:r}}=await s(e+(\"/\"===e[e.length-1]?\"\":\"/\")+\"retrieveTravelModes\",{query:{f:\"json\"}});return{supportedTravelModes:t,defaultTravelMode:r}}catch(t){throw new r(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:t})}}export{l as collectGeometries,n as dropZValuesOffInputGeometry,d as fetchServiceDescription,p as fetchTravelModesGP,i as handleSolveResponse,u as isInputGeometryZAware,f as retrieveTravelModes};\n"],"sourceRoot":""}