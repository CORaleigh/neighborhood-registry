{"version":3,"sources":["../node_modules/@arcgis/core/core/CircularArray.js","../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureFilter.js","../node_modules/@arcgis/core/layers/graphics/data/utils.js","../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderPBFIndirect.js","../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithCursor.js","../node_modules/@arcgis/core/views/2d/layers/features/Store2D.js","../node_modules/@arcgis/core/views/2d/layers/features/FeatureStore2D.js","../node_modules/@arcgis/core/layers/graphics/contains.js","../node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js"],"names":["s","constructor","t","Number","POSITIVE_INFINITY","this","size","_start","maxSize","_buffer","isFinite","Array","enqueue","dequeue","peek","find","i","clear","e","getLogger","a","getAttribute","r","field","m","p","_geometryBounds","_idToVisibility","Map","_serviceInfo","_hash","check","_applyFilter","_resetAllHiddenIds","update","show","hide","invalidate","forEach","set","setKnownIds","setTrue","Set","o","get","h","has","push","_","createQuery","geometry","spatialRel","where","timeExtent","objectIds","fromJSON","JSON","stringify","Promise","all","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_clause","async","n","WhereClause","create","isStandardized","error","readArcadeFeature","testFeature","warn","d","fieldsIndex","_idsToShow","_idsToHide","hiddenIds","_spatialQueryOperator","geometryType","hasZ","hasM","_timeOperator","timeInfo","l","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","getObjectId","readHydratedGeometry","w","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","j","Object","freeze","U","M","F","G","esriGeometryPoint","u","esriGeometryPolyline","y","esriGeometryPolygon","g","esriGeometryMultipoint","S","N","c","f","J","outFields","orderByFields","groupByFieldsForStatistics","outStatistics","length","trim","onStatisticField","outSR","spatialReference","v","test","distance","units","then","geodesicBuffer","b","Z","toJSON","x","z","parse","B","featureAdapter","startTimeField","endTimeField","NEGATIVE_INFINITY","isNaN","Math","min","max","start","end","super","createInstance","_currentIndex","_reader","_indices","copy","getApproximateSize","getCursor","next","_nextIndex","_passesFilter","_getExists","setIndex","setArcadeSpatialReference","attachStorage","hasFeatures","exceededTransferLimit","getStorage","getComputedNumeric","getComputedNumericAtIndex","setComputedNumeric","setComputedNumericAtIndex","getComputedString","getComputedStringAtIndex","setComputedString","setComputedStringAtIndex","transform","extent","hasFilter","readAttribute","readAttributes","joinAttributes","hasField","setField","keys","castToText","getQuantizationTransform","getAttributeHash","getDisplayId","setDisplayId","getGroupId","setGroupId","getXHydrate","getYHydrate","getX","getY","getIndex","readLegacyFeature","readOptimizedFeature","readLegacyPointGeometry","readLegacyGeometry","readLegacyCentroid","readGeometryArea","readUnquantizedGeometry","readGeometry","readCentroid","_readAttribute","Error","_readAttributes","referencesGeometry","evaluate","$feature","_canCacheExpressionValue","_sourceInfo","_bitsets","computed","getBitset","createBitset","_schema","console","debug","targets","name","attributes","type","_createArcadeComputedField","_createLabelArcadeComputedField","_computedFields","some","expression","referencesScale","_statisticFields","setComputedAttributes","_evaluateField","resultType","fieldIndex","valueExpression","fields","createLabelFunction","label","builder","$view","scale","I","getAttributes","cloneWithGeometry","getGeometry","getCentroid","events","_featureSetsByInstance","_objectIdToDisplayId","_spatialIndexInvalid","_indexSearchCache","_index","minX","_storage","getXMin","minY","getYMin","maxX","getXMax","maxY","getYMax","mode","featureCount","vertexCount","hasInstance","onTileData","addOrUpdate","instance","_insertFeature","emit","search","_rebuildIndex","id","tileId","readers","_searchIndex","bounds","getInstanceId","from","insert","createDisplayId","setInstanceId","remove","delete","releaseDisplayId","removeAtIndex","isEmpty","_lookupFeature","forEachUnsafe","_getFeatureSet","forEachInBounds","lookupFeatureByDisplayId","forEachBounds","sweepFeatures","unsetAttributeData","sweepFeatureSets","lookupObjectId","lookupDisplayId","lookupByDisplayIdUnsafe","setBounds","load","coords","lengths","R","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriGeometryEnvelope","resolve","bind","P","query","rings"],"mappings":"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","file":"static/js/51.db1b1f54.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"./maybe.js\";class s{constructor(t=Number.POSITIVE_INFINITY){this.size=0,this._start=0,this.maxSize=t,this._buffer=isFinite(t)?new Array(t):[]}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=t:this._buffer[this._start+this.size++]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}find(s){if(0===this.size)return null;for(const i of this._buffer)if(t(i)&&s(i))return i;return null}clear(s){let i=this.dequeue();for(;t(i);)s&&s(i),i=this.dequeue()}}export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Logger.js\";import r from\"../../../../../core/Error.js\";const t=e.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),a={getAttribute:(e,r)=>e.field(r)};async function s(e,s){const n=await import(\"../../../../../core/sql/WhereClause.js\");try{const o=n.WhereClause.create(e,s);if(!o.isStandardized){const e=new r(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",o);t.error(e)}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(o){return t.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",e),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import e from\"../../../core/Logger.js\";import i from\"../../../core/Error.js\";import{getBoundsXY as s}from\"../../../geometry/support/boundsUtils.js\";import{create as r}from\"../../../geometry/support/aaBoundingRect.js\";import o from\"../../../tasks/support/Query.js\";import{normalizeQueryLike as h}from\"./utils.js\";import{getSpatialQueryOperator as a}from\"./spatialQuerySupport.js\";import{getTimeOperator as l}from\"./timeSupport.js\";import{featureAdapter as n}from\"../../../views/2d/layers/features/FeatureStore2D.js\";import{createWhereClause as d}from\"../../../views/2d/layers/features/support/whereUtils.js\";const m=e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\"),_=1,u=2;class p{constructor(t){this._geometryBounds=r(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,_)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&_),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?_|u:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return o.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await h(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await d(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",r=await a(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);s(this._geometryBounds,e),this._spatialQueryOperator=r,this.geometry=e,this.spatialRel=i}_setTimeFilter(t){if(this.timeExtent=this._timeOperator=null,t&&t.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=t.timeExtent,this._timeOperator=l(this._serviceInfo.timeInfo,t.timeExtent,n);else{const e=new i(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",t.timeExtent);m.error(e)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(e){return!t(this._timeOperator)||this._timeOperator(e)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{e&_||(this._idToVisibility.set(i,_),t.push(i))})),t}}export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../core/maybe.js\";import{JSONMap as t}from\"../../../core/jsonMap.js\";import{isGeographic as r,isWebMercator as i,WGS84 as o}from\"../../../geometry/support/spatialReferenceUtils.js\";import{getGeometryExtent as n}from\"../../../geometry/support/extentUtils.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import{getUnitString as a}from\"../../../core/unitUtils.js\";import{normalizeCentralMeridian as l}from\"../../../geometry/support/normalizeUtils.js\";import m from\"../OptimizedGeometry.js\";import{quantizeOptimizedGeometry as c,convertToPoint as u,generalizeOptimizedGeometry as f,removeZMValues as p,convertToPolyline as y,convertToPolygon as g,convertToMultipoint as S}from\"../featureConversionUtils.js\";import{getCentroidOptimizedGeometry as R}from\"../centroid.js\";import{checkProjectionSupport as d,project as h}from\"./projectionSupport.js\";const w=new t({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),j=Object.freeze({}),U=new m,M=new m,F=new m,G={esriGeometryPoint:u,esriGeometryPolyline:y,esriGeometryPolygon:g,esriGeometryMultipoint:S};function N(e,t,r,i=e.hasZ,o=e.hasM){const n=e.hasZ&&i,s=e.hasM&&o;if(r){const a=c(F,t,e.hasZ,e.hasM,\"esriGeometryPoint\",r,i,o);return u(a,n,s)}return u(t,n,s)}function O(e,t,r){return\"esriGeometryPolygon\"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=R(new m,t.geometry,e.hasZ,e.hasM)),N(e,t.centroid,r)):null}function _(e,t,r,i,o,n,s=t,a=r){const l=t&&s,m=r&&a,u=i?\"coords\"in i?i:i.geometry:null;if(!u)return null;if(o){let i=f(M,u,t,r,e,o,s,a);return n&&(i=c(F,i,l,m,e,n)),G[e](i,l,m)}if(n){const i=c(F,u,t,r,e,n,s,a);return G[e](i,l,m)}return p(U,u,t,r,s,a),G[e](U,l,m)}async function J(e,t,r){const{outFields:i,orderByFields:o,groupByFieldsForStatistics:n,outStatistics:s}=e;if(i)for(let a=0;a<i.length;a++)i[a]=i[a].trim();if(o)for(let a=0;a<o.length;a++)o[a]=o[a].trim();if(n)for(let a=0;a<n.length;a++)n[a]=n[a].trim();if(s)for(let a=0;a<s.length;a++)s[a].onStatisticField&&(s[a].onStatisticField=s[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),v(e,t,r)}async function P(e,t,r){return v(e,t,r)}async function v(t,r,i){if(!t)return null;let{where:o}=t;if(t.where=o=o&&o.trim(),(!o||/^1 *= *1$/.test(o)||r&&r===o)&&(t.where=null),!t.geometry)return t;let a=await Z(t);if(t.distance=0,t.units=null,\"esriSpatialRelEnvelopeIntersects\"===t.spatialRel){const{spatialReference:e}=t.geometry;a=n(a),a.spatialReference=e}t.geometry=a,await d(a.spatialReference,i);const m=(await l(s(a)))[0];if(e(m))throw j;const c=m.toJSON(),u=await h(c,c.spatialReference,i);if(!u)throw j;return u.spatialReference=i,t.geometry=u,t}async function Z(e){const{geometry:t,distance:n,units:s}=e;if(null==n||\"vertexAttributes\"in t)return t;const l=t.spatialReference,m=s?w.fromJSON(s):a(l),c=l&&(r(l)||i(l))?t:await d(l,o).then((()=>h(t,o)));return(await b())(c.spatialReference,c,n,m)}async function b(){return(await import(\"../../../geometry/geometryEngineJSON.js\")).geodesicBuffer}function x(e){return e&&z in e?JSON.parse(JSON.stringify(e,B)):e}const z=\"_geVersion\",B=(e,t)=>e!==z?t:void 0;export{j as QUERY_ENGINE_EMPTY_RESULT,x as cleanFromGeometryEngine,O as getCentroid,_ as getGeometry,P as normalizeFilter,J as normalizeQuery,v as normalizeQueryLike,N as transformCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:l}=t;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&l)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,l);null==n||isNaN(n)||(r=Math.min(r,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||l;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(r=Math.min(r,u),i=Math.max(i,u))}))}return{start:r,end:i}}function n(t,n,r){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;return null===s&&null===a?null:void 0===s&&void 0===a?l():i&&o?e(r,i,o,s,a):u(r,i||o,s,a)}function e(t,n,e,u,l){return null!=u&&null!=l?r=>{const i=t.getAttribute(r,n),o=t.getAttribute(r,e);return(null==i||i<=l)&&(null==o||o>=u)}:null!=u?n=>{const l=t.getAttribute(n,e);return null==l||l>=u}:null!=l?e=>{const u=t.getAttribute(e,n);return null==u||u<=l}:void 0}function u(t,n,e,u){return null!=e&&null!=u&&e===u?u=>t.getAttribute(u,n)===e:null!=e&&null!=u?l=>{const r=t.getAttribute(l,n);return r>=e&&r<=u}:null!=e?u=>t.getAttribute(u,n)>=e:null!=u?e=>t.getAttribute(e,n)<=u:void 0}function l(){return()=>!1}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{FeatureSetReader as e}from\"./FeatureSetReader.js\";class r extends e{constructor(r,t){super(e.createInstance()),this._currentIndex=-1,this._reader=r,this._indices=t}static from(e,t){return new r(e.copy(),t)}get hasNext(){return this._currentIndex+1<this._indices.length}getApproximateSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const e=new r(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e}next(){for(;this._nextIndex()&&!this._reader._passesFilter()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(e){this._reader.setArcadeSpatialReference(e)}attachStorage(e){this._reader.attachStorage(e)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(e){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(e,r){return this._reader.setComputedNumericAtIndex(r,0)}getComputedString(e){return this._reader.getComputedStringAtIndex(0)}setComputedString(e,r){return this._reader.setComputedStringAtIndex(0,r)}getComputedNumericAtIndex(e){return this._reader.getComputedNumericAtIndex(e)}setComputedNumericAtIndex(e,r){this._reader.setComputedNumericAtIndex(e,r)}getComputedStringAtIndex(e){return this._reader.getComputedStringAtIndex(e)}setComputedStringAtIndex(e,r){return this._reader.setComputedStringAtIndex(e,r)}transform(e,r,t,d){const a=this.copy();return a._reader=this._reader.transform(e,r,t,d),a}extent(e,r,t,d){const a=this.copy();return a._reader=this._reader.extent(e,r,t,d),a}hasFilter(){return this._reader.hasFilter()}readAttribute(e,r=!1){return this._reader.readAttribute(e,r)}readAttributes(){return this._reader.readAttributes()}joinAttributes(e){return this._reader.joinAttributes(e)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(e){return this.readAttribute(e,!0)}hasField(e){return this._reader.hasField(e)}setField(e,r){return this._reader.setField(e,r)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(e){return this._reader.setDisplayId(e)}getGroupId(){return this._reader.getGroupId()}setGroupId(e){return this._reader.setGroupId(e)}getXHydrate(){return this._reader.getXHydrate()}getYHydrate(){return this._reader.getYHydrate()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(e){return this._reader.setIndex(e)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_passesFilter(){return this._reader._passesFilter()}_readAttribute(e,r){throw new Error(\"Error: Should not be called. Underlying _reader should be used instead\")}_readAttributes(){throw new Error(\"Error: Should not be called. Underlying _reader should be used instead\")}}export{r as FeatureSetReaderIndirect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";function r(r,a,t){r.referencesGeometry();const n=a.readArcadeFeature();try{return r.evaluate({...t,$feature:n})}catch(o){return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",o),null}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{isNone as s}from\"../../../../core/maybe.js\";import{createRendererExpression as t}from\"../../../../support/arcadeOnDemand.js\";import{diff as i,hasDiff as a}from\"../../../../core/accessorSupport/diffUtils.js\";import r from\"../../arcade/callExpressionWithCursor.js\";const c=import(\"../../../../layers/support/labelFormatUtils.js\");class o{constructor(e,s){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:s.getBitset(s.createBitset())}}invalidate(){this._bitsets.computed.clear()}async updateSchema(t,r){const c=i(this._schema,r);if(this._schema=r,!r||s(c)||!a(c,\"attributes\"))return;e(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - Store:\",c),this._bitsets.computed.clear(),t.targets[r.name]=!0;const o=r.attributes,n=[],p=[];for(const e in o){const s=o[e];switch(s.type){case\"field\":break;case\"expression\":n.push(this._createArcadeComputedField(s));break;case\"label-expression\":n.push(this._createLabelArcadeComputedField(s));break;case\"statistic\":p.push(s)}}this._computedFields=await Promise.all(n),this._canCacheExpressionValue=!this._computedFields.some((e=>\"expression\"===e.type&&e.expression.referencesScale())),this._statisticFields=p}setComputedAttributes(e,s,t,i){const a=this._bitsets.computed;if(!this._canCacheExpressionValue||!a.has(t)){a.set(t);for(const a of this._computedFields){const r=this._evaluateField(s,a,i);switch(a.resultType){case\"numeric\":e.setComputedNumericAtIndex(t,a.fieldIndex,r);break;case\"string\":e.setComputedStringAtIndex(t,a.fieldIndex,r)}}}}async _createArcadeComputedField(e){const s=this._sourceInfo.spatialReference,i=this._sourceInfo.fieldsIndex;return{...e,expression:await t(e.valueExpression,s,i)}}async _createLabelArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fields,{createLabelFunction:i}=await c,a=await i(e.label,t,s);return{...e,builder:a}}_evaluateField(e,s,t){switch(s.type){case\"label-expression\":{const t=e.readArcadeFeature();return s.builder.evaluate(t)||\"\"}case\"expression\":{const{expression:i}=s;return r(i,e,{$view:{scale:t}})}}}}export{o as Store2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as t,isSome as e,unwrap as s}from\"../../../../core/maybe.js\";import a from\"../../../../core/Evented.js\";import r from\"../../../../core/CircularArray.js\";import{fromRect as n}from\"../../../../geometry/support/aaBoundingBox.js\";import{r as i}from\"../../../../chunks/rbush.js\";import{Store2D as o}from\"./Store2D.js\";import{FeatureSetReaderIndirect as d}from\"./support/FeatureSetReaderPBFIndirect.js\";function h(t,e){return t<<16|e}function c(t){return(4294901760&t)>>>16}function I(t){return 65535&t}const u={getObjectId:t=>t.getObjectId(),getAttributes:t=>t.readAttributes(),getAttribute:(t,e)=>t.readAttribute(e),cloneWithGeometry:(t,e)=>t,getGeometry:t=>t.readHydratedGeometry(),getCentroid:(t,e)=>t.readCentroid()};class l extends o{constructor(t,e,s){super(t,e),this.featureAdapter=u,this.events=new a,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new r(50),this._index=i(9,(t=>({minX:this._storage.getXMin(t),minY:this._storage.getYMin(t),maxX:this._storage.getXMax(t),maxY:this._storage.getYMax(t)}))),this._storage=e,this.mode=s}get storage(){return this._storage}get storeStatistics(){return{featureCount:0,vertexCount:0}}hasInstance(t){return this._featureSetsByInstance.has(t)}onTileData(e,s){if(t(s.addOrUpdate))return s;if(s.addOrUpdate.attachStorage(this._storage),\"snapshot\"===this.mode){const t=s.addOrUpdate.getCursor();for(;t.next();){const s=t.getDisplayId();this.setComputedAttributes(this._storage,t,s,e.scale)}return s}this._featureSetsByInstance.set(s.addOrUpdate.instance,s.addOrUpdate);const a=s.addOrUpdate.getCursor();for(;a.next();)this._insertFeature(a,e.scale);return this._spatialIndexInvalid=!0,this.events.emit(\"changed\"),s}search(t){this._rebuildIndex();const s=t.id,a=this._indexSearchCache.find((t=>t.tileId===s));if(e(a))return a.readers;const r=new Map,n=this._searchIndex(t.bounds),i=[];for(const e of n){const t=this._storage.getInstanceId(e),s=c(t),a=I(t);r.has(s)||r.set(s,[]);r.get(s).push(a)}return r.forEach(((t,e)=>{const s=this._featureSetsByInstance.get(e);i.push(d.from(s,t))})),this._indexSearchCache.enqueue({tileId:s,readers:i}),i}insert(t){const e=t.getCursor(),s=this._storage;for(;e.next();){var a;const t=h(e.instance,e.getIndex()),r=e.getObjectId(),n=null!=(a=this._objectIdToDisplayId.get(r))?a:this._storage.createDisplayId();e.setDisplayId(n),s.setInstanceId(n,t),this._objectIdToDisplayId.set(r,n)}this._featureSetsByInstance.set(t.instance,t),this._spatialIndexInvalid=!0}remove(t){const e=this._objectIdToDisplayId.get(t);if(!e)return;const s=this._storage.getInstanceId(e),a=I(s),r=c(s),n=this._featureSetsByInstance.get(r);this._objectIdToDisplayId.delete(t),this._storage.releaseDisplayId(e),n.removeAtIndex(a),n.isEmpty&&this._featureSetsByInstance.delete(r),this._spatialIndexInvalid=!0}forEach(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=this._lookupFeature(s);t(a)}))}forEachUnsafe(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=c(s),r=I(s),n=this._getFeatureSet(a);n.setIndex(r),t(n)}))}forEachInBounds(t,e){const a=this._searchIndex(t);for(const r of a){const t=this.lookupFeatureByDisplayId(r,this._storage);e(s(t))}}forEachBounds(t,e,s){this._rebuildIndex();const a=[0,0,0,0];for(const r of t){if(!r.readGeometry())continue;const t=r.getDisplayId();a[0]=this._storage.getXMin(t),a[1]=this._storage.getYMin(t),a[2]=this._storage.getXMax(t),a[3]=this._storage.getYMax(t),e(n(s,a))}}sweepFeatures(t,e,s){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach(((a,r)=>{t.has(a)||(e.releaseDisplayId(a),s&&s.unsetAttributeData(a),this._objectIdToDisplayId.delete(r))})),this.events.emit(\"changed\")}sweepFeatureSets(t){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach(((e,s)=>{t.has(s)||this._featureSetsByInstance.delete(s)}))}lookupObjectId(e,s){const a=this.lookupFeatureByDisplayId(e,s);return t(a)?null:a.getObjectId()}lookupDisplayId(t){return this._objectIdToDisplayId.get(t)}lookupFeatureByDisplayId(t,e){const s=e.getInstanceId(t);return this._lookupFeature(s)}lookupByDisplayIdUnsafe(t){const e=this._storage.getInstanceId(t),s=c(e),a=I(e),r=this._getFeatureSet(s);return r?(r.setIndex(a),r):null}_insertFeature(t,e){const s=this._storage,a=t.getObjectId(),r=h(t.instance,t.getIndex());s.getInstanceId(t.getDisplayId());let n=this._objectIdToDisplayId.get(a);n||(n=s.createDisplayId(),this._objectIdToDisplayId.set(a,n),this._spatialIndexInvalid=!0),t.setDisplayId(n),s.setInstanceId(n,r),this.setComputedAttributes(s,t,n,e)}_searchIndex(t){this._rebuildIndex();const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this._index.search(e)}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const t=[];\"snapshot\"===this.mode?this._featureSetsByInstance.forEach((e=>{const s=e.getCursor();for(;s.next();){const e=s.getDisplayId();this._storage.setBounds(e,s)&&t.push(e)}})):this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e);this._storage.setBounds(e,this._lookupFeature(s))&&t.push(e)})),this._index.clear(),this._index.load(t),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(t){const e=c(t),s=I(t),a=this._getFeatureSet(e);if(!a)return null;const r=a.getCursor();return r.setIndex(s),r}_getFeatureSet(t){return this._featureSetsByInstance.get(t)}}export{l as FeatureStore2D,u as featureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{isValid as r}from\"../../../geometry/support/spatialReferenceUtils.js\";import{extentContainsPoint as t,extentContainsMultipoint as i}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as s}from\"../../../geometry/support/intersects.js\";import{isPolygon as o,isExtent as n,getJsonType as l}from\"../../../geometry/support/jsonUtils.js\";import a from\"../OptimizedGeometry.js\";import{convertFromPolygon as p}from\"../featureConversionUtils.js\";import{polygonContainsPoint as m,polygonContainsMultipoint as u}from\"../contains.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return!0===S.spatialRelationship[e]}function g(e){return!0===S.queryGeometry[l(e)]}function j(e){return!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,r,l,y,c){if(o(r)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=p(new a,r,!1,!1);return Promise.resolve((r=>m(e,!1,!1,r)))}if(o(r)&&\"esriGeometryMultipoint\"===l){const t=p(new a,r,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>u(t,!1,!1,e,y,c)))}if(n(r)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>t(r,f(l,y,c,e))));if(n(r)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>i(r,f(l,y,c,e))));if(n(r)&&\"esriSpatialRelIntersects\"===e){const e=s(l);return Promise.resolve((t=>e(r,f(l,y,c,t))))}return h().then((t=>{const i=t[R[e]].bind(null,r.spatialReference,r);return e=>i(f(l,y,c,e))}))}async function P(t,i,s){const{spatialRel:o,geometry:n}=t;if(n){if(!G(o))throw new e(c,\"Unsupported query spatial relationship\",{query:t});if(r(n.spatialReference)&&r(s)){if(!g(n))throw new e(c,\"Unsupported query geometry type\",{query:t});if(!j(i))throw new e(c,\"Unsupported layer geometry type\",{query:t});if(t.outSR)return y(t.geometry&&t.geometry.spatialReference,t.outSR)}}}function I(e){if(n(e))return!0;if(o(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n"],"sourceRoot":""}