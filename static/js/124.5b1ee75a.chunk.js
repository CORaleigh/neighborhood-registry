(this["webpackJsonpneighborhood-registry"]=this["webpackJsonpneighborhood-registry"]||[]).push([[124],{1112:function(t,e,n){"use strict";n.r(e),n.d(e,"work",(function(){return T})),n.d(e,"wrappedWork",(function(){return R}));var o=n(914),r=n(487),i=n(204);const c=Object(i.a)().vec3f("position").u16("componentIndex").u16("u16padding"),s=Object(i.a)().vec2u8("sideness"),a=(Object(r.a)(s),Object(i.a)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("u8padding",{glPadding:!0}).u16("u16padding",{glPadding:!0})),l=a.clone().vec3f("normal"),f=a.clone().vec3f("normalA").vec3f("normalB");var u=n(479),g=n(14),d=n(4);class h{updateSettings(t){this.settings=t,this.edgeHashFunction=t.reducedPrecision?v:w}write(t,e,n){const o=this.edgeHashFunction(n);I.seed=o;const r=I.getIntRange(0,255),i=I.getIntRange(0,this.settings.variants-1),c=I.getFloat(),s=255*(.5*function(t,e){const n=t<0?-1:1;return Math.abs(t)**e*n}(-(1-Math.min(c/.7,1))+Math.max(0,c-.7)/(1-.7),1.2)+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,r),t.variantStroke.set(e,i),t.variantExtension.set(e,s)}trim(t,e){return t.slice(0,e)}}const p=new Float32Array(6),b=new Uint32Array(p.buffer),m=new Uint32Array(1);function w(t){const e=p;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],m[0]=5381;for(let n=0;n<b.length;n++)m[0]=31*m[0]+b[n];return m[0]}function v(t){const e=p;e[0]=j(t.position0[0]),e[1]=j(t.position0[1]),e[2]=j(t.position0[2]),e[3]=j(t.position1[0]),e[4]=j(t.position1[1]),e[5]=j(t.position1[2]),m[0]=5381;for(let n=0;n<b.length;n++)m[0]=31*m[0]+b[n];return m[0]}function j(t){return Math.round(1e4*t)/1e4}class O{constructor(){this.commonWriter=new h}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return l.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),Object(d.e)(A,n.faceNormal0,n.faceNormal1),Object(d.q)(A,A),t.normal.setVec(e,A)}trim(t,e){return this.commonWriter.trim(t,e)}}O.Layout=l,O.glLayout=Object(r.a)(l,{divisor:1});class y{constructor(){this.commonWriter=new h}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return f.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this.commonWriter.trim(t,e)}}y.Layout=f,y.glLayout=Object(r.a)(f,{divisor:1});const A=Object(g.e)(),I=new u.a;var L=n(81);function S(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:U(t.layout)}}function U(t){const e=new Array;return t.fields.forEach(((t,n)=>{const o={...t,constructor:V(t.constructor)};e.push([n,o])})),{stride:t.stride,fields:e,fieldNames:t.fieldNames}}const N=[L.a,L.m,L.u,L.C,L.f,L.h,L.b,L.n,L.v,L.D,L.g,L.i,L.l,L.t,L.B,L.J,L.j,L.r,L.z,L.H,L.k,L.s,L.A,L.I,L.e,L.q,L.y,L.G,L.c,L.o,L.w,L.E,L.d,L.p,L.x,L.F];function V(t){return`${t.ElementType}_${t.ElementCount}`}const k=new Map;function x(t,e,n){const o=e/3,r=new Uint32Array(n+1),i=new Uint32Array(n+1),c=(t,e)=>{t<e?r[t+1]++:i[e+1]++};for(let m=0;m<o;m++){const e=t[3*m],n=t[3*m+1],o=t[3*m+2];c(e,n),c(n,o),c(o,e)}let s=0,a=0;for(let m=0;m<n;m++){const t=r[m+1],e=i[m+1];r[m+1]=s,i[m+1]=a,s+=t,a+=e}const l=new Uint32Array(6*o),f=r[n],u=(t,e,n)=>{if(t<e){const o=r[t+1]++;l[2*o]=e,l[2*o+1]=n}else{const o=i[e+1]++;l[2*f+2*o]=t,l[2*f+2*o+1]=n}};for(let m=0;m<o;m++){const e=t[3*m],n=t[3*m+1],o=t[3*m+2];u(e,n,m),u(n,o,m),u(o,e,m)}const g=(t,e)=>{const n=2*t,o=e-t;for(let r=1;r<o;r++){const t=l[n+2*r],e=l[n+2*r+1];let o=r-1;for(;o>=0&&l[n+2*o]>t;o--)l[n+2*o+2]=l[n+2*o],l[n+2*o+3]=l[n+2*o+1];l[n+2*o+2]=t,l[n+2*o+3]=e}};for(let m=0;m<n;m++)g(r[m],r[m+1]),g(f+i[m],f+i[m+1]);const d=new Int32Array(3*o),h=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,p=(t,e)=>{const n=h(t,e);d[3*e+n]=-1},b=(t,e,n,o)=>{const r=h(t,e);d[3*e+r]=o;const i=h(n,o);d[3*o+i]=e};for(let m=0;m<n;m++){let t=r[m];const e=r[m+1];let n=i[m];const o=i[m+1];for(;t<e&&n<o;){const e=l[2*t],o=l[2*f+2*n];e===o?(b(m,l[2*t+1],o,l[2*f+2*n+1]),t++,n++):e<o?(p(m,l[2*t+1]),t++):(p(o,l[2*f+2*n+1]),n++)}for(;t<e;)p(m,l[2*t+1]),t++;for(;n<o;)p(l[2*f+2*n],l[2*f+2*n+1]),n++}return d}N.forEach((t=>k.set(V(t),t)));var E=n(74),D=n(107),M=n(27),F=n(203);const W=-1;function B(t,e,n,o=J){const r=t.vertices.position,i=t.vertices.componentIndex,c=Object(M.d)(o.anglePlanar),s=Object(M.d)(o.angleSignificantEdge),a=Math.cos(s),l=Math.cos(c),f=z.edge,u=f.position0,g=f.position1,h=f.faceNormal0,p=f.faceNormal1,b=function(t){const e=t.faces.length/3,n=t.vertices.position,o=t.faces,r=H.v0,i=H.v1,c=H.v2,s=new Float32Array(3*e);for(let a=0;a<e;a++){const t=o[3*a+0],e=o[3*a+1],l=o[3*a+2];n.getVec(t,r),n.getVec(e,i),n.getVec(l,c),Object(d.i)(i,i,r),Object(d.i)(c,c,r),Object(d.f)(r,i,c),Object(d.q)(r,r),s[3*a+0]=r[0],s[3*a+1]=r[1],s[3*a+2]=r[2]}return s}(t),m=function(t){const e=t.faces.length/3,n=t.faces,o=t.neighbors;let r=0;for(let s=0;s<e;s++){const t=o[3*s+0],e=o[3*s+1],i=o[3*s+2],c=n[3*s+0],a=n[3*s+1],l=n[3*s+2];r+=t===W||c<a?1:0,r+=e===W||a<l?1:0,r+=i===W||l<c?1:0}const i=new Int32Array(4*r);let c=0;for(let s=0;s<e;s++){const t=o[3*s+0],e=o[3*s+1],r=o[3*s+2],a=n[3*s+0],l=n[3*s+1],f=n[3*s+2];(t===W||a<l)&&(i[c++]=a,i[c++]=l,i[c++]=s,i[c++]=t),(e===W||l<f)&&(i[c++]=l,i[c++]=f,i[c++]=s,i[c++]=e),(r===W||f<a)&&(i[c++]=f,i[c++]=a,i[c++]=s,i[c++]=r)}return i}(t),w=m.length/4,v=e.allocate(w);let j=0;const O=w,y=n.allocate(O);let A=0,I=0,L=0;const S=Object(D.h)(0,w),U=new Float32Array(w);Object(E.b)(U,((t,e,n)=>{r.getVec(m[4*e+0],u),r.getVec(m[4*e+1],g),n[e]=Object(d.n)(u,g)})),S.sort(((t,e)=>U[e]-U[t]));const N=new Array,V=new Array;for(let E=0;E<w;E++){const t=S[E],o=U[t],s=m[4*t+0],w=m[4*t+1],O=m[4*t+2],k=m[4*t+3],x=k===W;if(r.getVec(s,u),r.getVec(w,g),x)Object(d.v)(h,b[3*O+0],b[3*O+1],b[3*O+2]),Object(d.j)(p,h),f.componentIndex=i.get(s),f.cosAngle=Object(d.g)(h,p);else{if(Object(d.v)(h,b[3*O+0],b[3*O+1],b[3*O+2]),Object(d.v)(p,b[3*k+0],b[3*k+1],b[3*k+2]),f.componentIndex=i.get(s),f.cosAngle=Object(d.g)(h,p),P(f,l))continue;f.cosAngle<-.9999&&Object(d.j)(p,h)}I+=o,L++,x||q(f,a)?(e.write(v,j++,f),N.push(o)):C(f,c)&&(n.write(y,A++,f),V.push(o))}const k=new Float32Array(N.reverse()),x=new Float32Array(V.reverse());return{regular:{instancesData:e.trim(v,j),lodInfo:{lengths:k}},silhouette:{instancesData:n.trim(y,A),lodInfo:{lengths:x}},averageEdgeLength:I/L}}function q(t,e){return t.cosAngle<e}function P(t,e){return t.cosAngle>e}function C(t,e){const n=Object(M.a)(t.cosAngle),o=z.fwd,r=z.ortho;return Object(F.d)(o,t.position1,t.position0),n*(Object(d.g)(Object(d.f)(r,t.faceNormal0,t.faceNormal1),o)>0?-1:1)>e}const z={edge:{position0:Object(g.e)(),position1:Object(g.e)(),faceNormal0:Object(g.e)(),faceNormal1:Object(g.e)(),componentIndex:0,cosAngle:0},ortho:Object(g.e)(),fwd:Object(g.e)()},H={v0:Object(g.e)(),v1:Object(g.e)(),v2:Object(g.e)()},J={anglePlanar:4,angleSignificantEdge:35};async function R(t){const e=function(t){return{data:c.createView(t.dataBuffer),indices:"Uint32Array"===t.indicesType?new Uint32Array(t.indicesBuffer):"Uint16Array"===t.indicesType?new Uint16Array(t.indicesBuffer):void 0,indicesLength:t.indicesLength,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}(t),n=T(e),o=[e.data.buffer];return{result:$(n,o),transferList:o}}function T(t){const e=function(t,e,n,r){if(e)return{faces:n,facesLength:r,neighbors:x(n,r,t.count),vertices:t};const i=Object(o.a)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:r}),s=x(i.indices,r,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:s,vertices:c.createView(i.buffer)}}(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return G.updateSettings(t.writerSettings),_.updateSettings(t.writerSettings),B(e,G,_)}function $(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:S(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:S(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}const G=new O,_=new y},914:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(27);function r(t,e,n){var r;const l=t.byteLength/(4*e),f=new Uint32Array(t,0,l*e);let u=new Uint32Array(l);const g=null!=(r=null==n?void 0:n.minReduction)?r:0,d=(null==n?void 0:n.originalIndices)||null,h=d?d.length:0,p=(null==n?void 0:n.componentOffsets)||null;let b=0;if(p)for(let o=0;o<p.length-1;o++){const t=p[o+1]-p[o];t>b&&(b=t)}else b=l;const m=Math.floor(1.1*b)+1;(null==a||a.length<2*m)&&(a=new Uint32Array(Object(o.k)(2*m)));for(let o=0;o<2*m;o++)a[o]=0;let w=0;const v=!!p&&!!d,j=v?h:l,O=v?new Uint32Array(h):null,y=1.96;let A=0!==g?Math.ceil(4*y*y/(g*g)*g*(1-g)):j,I=1,L=p?p[1]:j;for(let o=0;o<j;o++){if(o===A){const t=1-w/o;if(t+y*Math.sqrt(t*(1-t)/o)<g)return null;A*=2}if(o===L){for(let t=0;t<2*m;t++)a[t]=0;if(d)for(let t=p[I-1];t<p[I];t++)O[t]=u[d[t]];L=p[++I]}const t=v?d[o]:o,n=t*e,r=s(f,n,e);let c=r%m,l=w;for(;0!==a[2*c+1];){if(a[2*c]===r){const t=a[2*c+1]-1;if(i(f,n,t*e,e)){l=u[t];break}}c++,c>=m&&(c-=m)}l===w&&(a[2*c]=r,a[2*c+1]=t+1,w++),u[t]=l}if(0!==g&&1-w/l<g)return null;if(v){for(let t=p[I-1];t<O.length;t++)O[t]=u[d[t]];u=O}const S=new Uint32Array(e*w);w=0;for(let o=0;o<j;o++)u[o]===w&&(c(f,(v?d[o]:o)*e,S,w*e,e),w++);if(d&&!v){const t=new Uint32Array(h);for(let e=0;e<t.length;e++)t[e]=u[d[e]];u=t}return{buffer:S.buffer,indices:u,uniqueCount:w}}function i(t,e,n,o){for(let r=0;r<o;r++)if(t[e+r]!==t[n+r])return!1;return!0}function c(t,e,n,o,r){for(let i=0;i<r;i++)n[o+i]=t[e+i]}function s(t,e,n){let o=0;for(let r=0;r<n;r++)o=t[e+r]+o|0,o=o+(o<<11)+(o>>>2)|0;return o>>>0}let a=null}}]);
//# sourceMappingURL=124.5b1ee75a.chunk.js.map